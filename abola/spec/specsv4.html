<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tabela de Publicidade / Especificações - ABOLA.pt</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">

  <style>

    :root{
  --bg:#fafafa;
  --panel:#fff;
  --ink:#111;
  --muted:#6b7280;
  --ring:rgba(0,0,0,.08);

  /* Buttons (generic .btn — NOT the nav tabs) */
  --btn-bg:#f3f4f6;
  --btn-fg:#3f3f3f;
  --btn-border:rgba(0,0,0,.14);
  --btn-hover:#e9eaee;
  --btn-active:#f6d809;
  --btn-active-fg:#111;
  --btn-active-border:#d7c800;

  --radius:0px;
  --radius-btn:3px;

  --shadow:0 1px 0 var(--ring), 0 4px 20px rgba(0,0,0,.06);

  --z-masthead:50;
  --z-section-head:5;

  /* Section bar/tail */
  --brand-red:#E20613;
  --tail-w-sm:148px;
  --bar-h-sm:14px;
  --tail-w-lg:185px;
  --bar-h-lg:16px;

  /* Tabs metrics */
  --tab-fs:14px;
  --tab-pt:6px;
  --tab-pb:12px;
  --tab-ul:8px;
}



/* Typography */
html, body { font-family: 'Open Sans', sans-serif; }
h1, h2, h3, h4, h5, h6{ font-weight:800; }
strong, b{ font-weight:600; }

/* ==== Global button reset ==== */
button,
[type="button"],
[type="submit"],
[type="reset"],
[role="button"]{
  -webkit-appearance:none;
  appearance:none;
  background:transparent;
  border:0;
  border-radius:0;
  padding:0;
  margin:0;
  font:inherit;
  color:inherit;
  line-height:inherit;
  letter-spacing:inherit;
  text-align:inherit;
  text-transform:inherit;
  box-shadow:none;
  outline:none;
  -webkit-tap-highlight-color:transparent;
  background-clip:padding-box;
  cursor:pointer;
}
button::-moz-focus-inner,
[type="button"]::-moz-focus-inner,
[type="submit"]::-moz-focus-inner,
[type="reset"]::-moz-focus-inner{ border:0; padding:0; }
button:disabled,
[type="button"]:disabled,
[type="submit"]:disabled,
[type="reset"]:disabled{ cursor:not-allowed; opacity:.6; }

body.no-scroll { overflow: hidden; }


/* Icon-style close button for the drawer */
.close-drawer{
  /* size & layout */
  width: 40px;
  height: 40px;
  display: inline-flex;
  align-items: center;
  justify-content: center;

  /* shape & base color */
  border-radius: 12px;
  background: #E20613; /* brand red */
  border: 1px solid rgba(0,0,0,.14);

  /* glossy/soft depth */
  background-image:
    radial-gradient(40% 60% at 30% 30%, rgba(255,255,255,.12), transparent),
    linear-gradient(180deg, #E20613 0%, #C50F19 100%);
  box-shadow: 0 1px 0 var(--ring), 0 6px 16px rgba(0,0,0,.18);

  color: #fff;
  transition: transform .02s ease, filter .15s ease, box-shadow .15s ease;
}

.close-drawer:hover{
  filter: brightness(1.04);
}

.close-drawer:active{
  transform: translateY(1px);
  box-shadow: 0 1px 0 var(--ring), 0 3px 10px rgba(0,0,0,.16);
}

/* the “X” mark */
.close-drawer .x{
  width: 18px;
  height: 18px;
  stroke: currentColor;
  /* keep line weight crisp on scale */
  vector-effect: non-scaling-stroke;
}

/* keep your accessible focus ring (you already have a global rule for button:focus-visible) */



/* =========================================================
   HERO – HIGHLIGHTS (print / Social Media / A Bola TV)
   ========================================================= */
.hero-highlights{
  margin-top: 12px;
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 20px;
}
@media (max-width: 980px){
  .hero-highlights{ grid-template-columns: 1fr 1fr; }
}
@media (max-width: 640px){
  .hero-highlights{ grid-template-columns: 1fr; }
}

.hl-card{
  background:#fff;
  color:#111;
  border-radius: 16px;
  border: 1px solid var(--ring);
  box-shadow: var(--shadow);
  padding: 16px 16px 14px 16px;
}

.hl-head{
  display:flex; align-items:center; gap:10px;
  padding-bottom:10px; margin-bottom:12px;
  border-bottom: 2px solid #efefef;
}
.hl-icon{
  width:34px; height:34px; display:inline-flex;
  align-items:center; justify-content:center;
  border-radius:10px;
  background:#f6f6f6;
}
.hl-icon svg{ width:22px; height:22px; display:block; }
.hl-title{
  font-size:18px; font-weight:800; letter-spacing:.2px;
}

.hl-rows{ display:flex; flex-direction:column; gap:10px; }
.hl-row{
  display:flex; align-items:baseline; justify-content:space-between; gap:12px;
}
.hl-row .label{ color:#6b7280; font-weight:600; font-size:12px; text-transform:uppercase; }
.hl-row .num{ font-weight:800; font-size:26px; line-height:1; }
.hl-row .sub{ color:#374151; font-size:13px; }

/* light pill list (e.g., “Followers”, “Average impressions”, etc.) */
.hl-list{ display:flex; flex-direction:column; gap:8px; }
.hl-pill{
  display:flex; align-items:center; gap:8px;
  background:#f7f7f7; border:1px solid var(--ring);
  border-radius:12px; padding:8px 10px; font-size:13px;
}
.hl-pill .k{ font-weight:700; }

/* =========================================================
   HERO – AUDIENCE PANELS (Website & Mobile App | Social Media)
   ========================================================= */
.hero-audience-panels{
  margin-top: 18px;
}
.aud-grid{
  display:grid; gap: 18px;
  grid-template-columns: 1fr 1fr;
}
@media (max-width: 980px){ .aud-grid{ grid-template-columns: 1fr; } }

.aud-panel{
  background: rgba(0,0,0,.72);
  color:#fff;
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 18px;
  box-shadow: 0 6px 22px rgba(0,0,0,.25);
  padding: 18px 18px 16px 18px;
  position: relative;
}

/* heading with small icon */
.aud-head{
  display:flex; align-items:center; gap:10px; margin-bottom:14px;
  font-size:22px; font-weight:800; letter-spacing:.3px;
}
.aud-head .ic{
  width:34px; height:34px; display:inline-flex;
  align-items:center; justify-content:center;
  border-radius:10px; background:rgba(255,255,255,.1);
}
.aud-head svg{ width:20px; height:20px; display:block; }

/* male/female split row (e.g., 27% / 73%) */
.aud-split{
  display:grid; grid-template-columns: 1fr 1fr; gap: 18px;
  margin: 6px 0 12px 0;
}
.split-box{
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 14px;
  padding: 12px 12px 10px 12px;
  text-align:center;
}
.split-box .pct{ font-size:40px; font-weight:900; line-height:1; }
.split-box .cap{ font-size:12px; text-transform:uppercase; opacity:.9; margin-top:4px; }

/* “classe” / “idades” lines */
.aud-lines{ display:flex; flex-direction:column; gap:12px; margin-top: 8px; }
.aud-line{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  border-top:1px dashed rgba(255,255,255,.18);
  padding-top:10px;
}
.aud-line .label{ font-weight:800; letter-spacing:.3px; text-transform:uppercase; }
.aud-line .value{ opacity:.95; }

/* big red % (e.g., 58%, 72%) */
.big-pct{
  font-size:56px; font-weight:900; color:#f44; /* red highlight */
  color: var(--brand-red);
  line-height:1; letter-spacing:.5px;
}

/* simple horizontal bar list for ages buckets */
.bar-list{
  list-style:none; margin:8px 0 0 0; padding:0; display:flex; flex-direction:column; gap:8px;
}
.bar-item{
  display:grid; grid-template-columns: 56px 1fr auto; gap:8px; align-items:center;
  font-variant-numeric: tabular-nums;
}
.bar-item .age{ opacity:.9; font-size:12px; }
.bar{
  position:relative; height:10px; border-radius:999px; overflow:hidden;
  background: rgba(255,255,255,.14);
}
.bar::after{
  content:""; position:absolute; inset:0 100% 0 0; border-radius:999px;
  background: var(--brand-red);
  transform: translateZ(0);
  width: var(--w, 0%);
}
.bar-item .pct{ font-weight:700; font-size:12px; }

/* mini legend / micro copy */
.aud-foot{ margin-top:10px; font-size:12px; opacity:.8; }

/* spacing harmony with the rest of the hero */
.hero .hl-card,
.hero .aud-panel{ backdrop-filter: saturate(1.1); }



/* Accessible focus ring */
button:focus-visible,
[type="button"]:focus-visible,
[type="submit"]:focus-visible,
[type="reset"]:focus-visible,
[role="button"]:focus-visible,
a.brand:focus-visible,
.tabs button:focus-visible,
.btn:focus-visible{
  outline:2px solid rgba(246,216,9,.9);
  outline-offset:2px;
  border-radius:var(--radius-btn);
}
@media (max-width:680px){
  button,
  [type="button"],
  [type="submit"],
  [type="reset"],
  [role="button"]{
    -webkit-appearance:none !important;
    appearance:none !important;
  }
}

/* ===== Global layout ===== */
html { scroll-padding-top: var(--mastpad, 96px); }
@media (max-width:680px){ html { scroll-padding-top: var(--mastpad, 120px); } }
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  color:var(--ink);
}

/* ===== Sticky masthead ===== */
.masthead{
  position:fixed; inset:0 0 auto 0; z-index:var(--z-masthead);
  background:#a80f1d;
  backdrop-filter:saturate(1.2) blur(8px);
  border-bottom:1px solid var(--ring);
  box-shadow:0 2px 12px rgba(0,0,0,.06);
}
.masthead > .brand{
  display:block;
  width:100%;
  background:#e20613;
  border:0;
  height:auto;
}
.brand-inner{
  max-width:1200px;
  margin:0 auto;
  padding:15px 24px 6px 24px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.brand-left{ display:flex; align-items:center; gap:10px; }
.brand-inner svg{ display:block; height:30px; width:auto; }

/* White pill button */
.brand-contact{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:10px 16px;
  background:#fff;
  color:#e20613;
  border-radius:12px;
  font-weight:800;
  text-transform:uppercase;
  font-size:14px;
  line-height:1;
  letter-spacing:.4px;
  text-decoration:none;
  border:1px solid rgba(0,0,0,.06);
  box-shadow:0 1px 0 var(--ring), 0 2px 10px rgba(0,0,0,.12);
  transition:transform .02s ease, box-shadow .15s ease, background-color .15s ease;
}
.brand-contact:hover{ text-decoration:none; color:#000; }
.brand-contact:active{ transform:translateY(1px); }

.masthead-inner{
  max-width:1200px;
  margin:0 auto;
  padding:8px 24px 10px 24px;
  display:grid;
  grid-template-columns:auto 1fr;
  align-items:center;
  gap:16px;
  width:100%;
  transition: height .24s ease-out;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.12),
              inset 0 -1px 0 rgba(0,0,0,.06);
}

/* NAV TABS */
.tabs{ display:flex; gap:18px; padding:0; background:transparent; border:0; }
.masthead-inner .tabs button{
  position:relative;
  border:0;
  background:transparent;
  color:rgba(255,255,255,.88);
  padding:var(--tab-pt) 0 var(--tab-pb);
  text-transform:uppercase;
  font-weight:800;
  font-size:var(--tab-fs);
  line-height:1.2;
  white-space:nowrap;
  transition:color .18s ease;
}
.masthead-inner .tabs button:hover{ color:#fff; }
.masthead-inner .tabs button.active{ color:#fff; }
.masthead-inner .tabs button::after{
  content:"";
  position:absolute;
  left:0; right:0; bottom:var(--tab-ul);
  height:2px;
  background:#f6d809;
  transform:scaleX(0);
  transform-origin:left center;
  transition:transform .18s ease;
}
/* default: only .active shows underline */
.masthead-inner .tabs button.active::after{ transform:scaleX(1); }

/* enable hover underline only on devices that actually have hover (desktops) */
@media (hover: hover) and (pointer: fine){
  .masthead-inner .tabs button:hover::after{ transform:scaleX(1); }
}


/* when open */
.context-slot.is-open {
  max-height: 500px; /* set larger than your expected content height */
}

/* open state */
.context-wrap.is-open {
  max-height: 1000px; /* bigger than the tallest content */
}



.header-spacer{ height:96px }

/* ===== Sections (default constrained width) ===== */
.section{ max-width:1200px; margin:0 auto; padding:0 24px; }
.section + .section{ margin-top:12px; }

/* ===== Abola (hero) section needs to be full-bleed ===== */
#sec-abola{
  max-width:none;      /* remove 1200px cap */
  padding:0;           /* no side padding wrapper */
  margin:0;            /* no auto-centering */
  width:100%;          /* take full viewport width */
}

.context-slot{ display:none; justify-self:end; }
.context-slot.is-open{ display:block; }

/* ===== Sticky section headers (for other sections) ===== */
.section-head{
  position:sticky; top:0; z-index:var(--z-section-head);
  background:linear-gradient(180deg,#fff,#fafafa);
  border-bottom:1px solid var(--ring);
  padding:12px 0; margin-bottom:8px;
  display:flex; align-items:center; gap:12px;
}
.section-head h2{ margin:0; font-size:1.55rem; text-transform:uppercase; }

/* Grid */
.grid{ display:grid; gap:18px; grid-template-columns:repeat(1,minmax(0,1fr)); }
@media (min-width:700px){ .grid{ grid-template-columns:repeat(2,minmax(0,1fr)); } }
@media (min-width:1000px){ .grid{ grid-template-columns:repeat(3,minmax(0,1fr)); } }
@media (min-width:1200px){ .grid{ grid-template-columns:repeat(4,minmax(0,1fr)); } }

/* Optional notice */
.print-note{ margin:6px 0 16px 0; padding:12px 16px; border:1px dashed var(--ring); background:#fff; border-radius:12px; color:var(--muted); font-size:12px; }

/* TV panel */
.tv-panel{ border:1px solid var(--ring); background:#fff; border-radius:16px; padding:16px; box-shadow:var(--shadow); }
.tv-panel h2{ margin:0 0 6px 0; font-size:20px }
.tv-panel .muted{ color:var(--muted) }

/* Long text blocks */
.doc{ background:#fff; border:1px solid var(--ring); border-radius:12px; padding:16px; box-shadow:var(--shadow); color:#111; line-height:1.6; }

/* Footer */
.site-footer{ max-width:1200px; margin:32px auto; padding:12px 24px; color:var(--muted); font-size:12px; text-align:center; }



/* Branded hero block */
.branded-hero{
  display:grid;
  grid-template-columns: 1.05fr 1fr;
  gap: clamp(16px, 3vw, 28px);
  padding: clamp(16px, 2.6vw, 24px);
  margin: 10px 0 18px 0;
  background:#fff;
  border:1px solid var(--ring);
  border-radius:16px;
  box-shadow: var(--shadow);
  align-items:center;
}
.branded-hero .brand-kicker{
  margin:0 0 8px 0;
  color: var(--brand-red);
  font-size: clamp(24px, 3.4vw, 40px);
  line-height:1.05;
  letter-spacing:.2px;
  text-transform: uppercase;
  font-weight: 800;
}
.branded-hero p{ margin: 0 0 10px 0; font-size: clamp(15px, 1.6vw, 19px); line-height:1.45; color:#111; }
.branded-hero .muted.small{ color: var(--muted); font-size: 12px; margin-top: 6px; }

.branded-graphic{
  width: 100%;
  max-width: 560px;           /* keep it from getting too huge on desktop */
  aspect-ratio: 1 / 1;
  display: grid;
  place-items: center;
  margin-inline: auto;
}

/* mobile stacking & spacing */
@media (max-width: 900px){
  .branded-hero{ grid-template-columns: 1fr; }
  .branded-copy{ order: 1; }
  .branded-graphic{
    order: 2;                 /* BELOW the text */
    margin-top: 12px;
    max-width: clamp(300px, 80vw, 420px);
    justify-self: center;
  }
}

/* very small phones: tighten */
@media (max-width: 420px){
  .branded-hero{ border-radius:12px; }
}


/* ===== Cards ===== */
.card{ background:transparent; border:0; cursor:pointer;}

.card:hover {opacity:0.9; color:#222222}

.poster{
  position:relative;
  aspect-ratio: var(--ar, 13 / 7); /* default (digital) */
  border-radius: var(--radius);
  overflow:hidden;
  box-shadow: var(--shadow);
  margin-bottom:10px;
}

.card[data-medium="digital"] .poster{ --ar: 13 / 7; } /* 650×350-ish */
.card[data-medium="print"]   .poster{ --ar: 8 / 7;  } 

.poster .grad{
  position:absolute; inset:0;
  background-position:center;
  background-repeat:no-repeat;
  background-size:contain;  /* shows 100% of the PNG */
}
.poster .label{     
  position: absolute;
    right: 4px;
    bottom: 0px;
    background: rgb(226 6 19);
    color: #fff;
    font-size: 10px;
    padding: 4px 8px;
  }

  .card[data-medium="print"] .poster{ background:#000; }
.card[data-medium="print"] .poster .grad{ background-color:#000; }

.preview .media-box.is-print{ background:#000; aspect-ratio: 3/2;}
.preview .media-box.is-print img,
.preview .media-box.is-print video{ background:transparent; object-fit: contain; }

.meta{ padding:8px; background:transparent }
.title{ display:flex; align-items:center; justify-content:space-between; gap:8px; font-weight:700 }

/* ===== Drawer + Scrim ===== */
.scrim{ position:fixed; inset:0; background:rgba(0,0,0,.28); opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:9990; }
.scrim.show{ opacity:1; pointer-events:auto }
.drawer{ position:fixed; top:0; right:-560px; width:100%; max-width:560px; height:100%; background:#fff; border-left:1px solid var(--ring); box-shadow:-8px 0 24px rgba(0,0,0,.12); display:flex; flex-direction:column; transition:right .25s ease; z-index:10000; }
.drawer.show{ right:0 }
.drawer-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; position:sticky; top:0; background:#fff; padding:16px 16px 8px 16px; border-bottom:1px solid var(--ring); }
.drawer-title{ margin:0 0 2px 0; font-size:18px }


/* Drawer scroll area (keep) */
.drawer-content{
  flex: 1 1 auto;
  overflow: auto;
  overscroll-behavior: contain;
}




.preview{
  border:1px solid var(--ring);
  overflow:hidden;
  padding:0;           /* ensures media touches the borders */
  background:#fff;
  min-height:0;        /* let aspect-ratio drive height */
}

.preview .media-box{
  width:100%;
  max-width: var(--maxw, 650px);
  aspect-ratio: var(--ar, 13 / 7);
  margin:0 auto;
  border-radius:0px;
  overflow:hidden;
  background:#f3f4f6;
}

.preview .media-box.is-digital{ --ar: 13 / 7; --maxw: 650px; }

.preview .media-box img,
.preview .media-box video{
  width:100%;
  height:100%;
  object-fit: cover;
  display:block;
}



.specs{ border:1px solid var(--ring); border-radius:12px; padding:12px }
.specs dl{ display:grid; grid-template-columns:1fr 1fr; gap:8px }
.specs dt{ color:var(--muted); font-size:12px }
.specs dd{ margin:0; font-weight:600 }


/* Lock page scroll when drawer is open */
html.no-scroll,
body.no-scroll{
  overflow: hidden;
  height: 100%;
  touch-action: none;
  overscroll-behavior: none;
}

/* Make the drawer the only scroll area while open */
.drawer{
  /* already has position:fixed etc. */
  overscroll-behavior: contain; /* stop scroll chaining */
}
.drawer-content{
  flex: 1 1 auto;              /* fill remaining height under sticky header */
  overflow: auto;              /* scroll inside the drawer */
  overscroll-behavior: contain;
}



/* ===== Generic .btn (chips etc.) ===== */
.btn{
  border:1px solid var(--btn-border);
  background:var(--btn-bg);
  color:var(--btn-fg);
  padding:6px 10px;
  border-radius:var(--radius-btn);
  font-weight:600;
  font-size:14px;
  line-height:1.2;
  text-transform:capitalize;
  transition:background-color .15s ease, color .15s ease, border-color .15s ease, transform .02s ease, box-shadow .15s ease;
}
.btn:hover{ background:var(--btn-hover); }
.btn:active{ transform:translateY(1px); }
.btn.primary{
  background:var(--btn-active);
  color:var(--btn-active-fg);
  border-color:var(--btn-active-border);
  box-shadow:0 1px 0 var(--ring), 0 2px 10px rgba(0,0,0,.10);
}
.btn.ghost{
  background:transparent;
  color:var(--ink);
  border:1px dashed var(--btn-border);
}
.close-drawer{ white-space:nowrap }

/* ===== Responsive ===== */
@media (max-width:680px){
  .brand-inner{ padding:12px 16px 6px 16px; }
  .brand-inner svg{ height:26px; }

  .masthead-inner{
    grid-template-columns:1fr;
    gap:8px;
    padding:6px 16px 10px 16px;
  }

  .main-tabs, .context-tabs{
    width:100%; overflow-x:auto; -webkit-overflow-scrolling:touch; scrollbar-width:thin;
  }

  .tabs{ gap:14px; }

  :root{
    --tab-fs:13px;
    --tab-pb:10px;
    --tab-ul:6px;
  }

  .btn{ padding:6px 8px; font-size:13px; }
}

/* ---- TV ratecard table + scroller ---- */
.hscroll{
  display: block;
  width: 100%;
  overflow-x: auto;
  /* momentum scroll on iOS — harmless in Chrome */
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
}


@supports (-webkit-touch-callout: none) {
  .hscroll{ -webkit-overflow-scrolling: auto; }
}


.rate-table{
  border-collapse: separate;  
  border-spacing: 0;
  width: max-content;        
  min-width: 100%;         
  table-layout: auto;      
  font-size:13px;
  font-variant-numeric: tabular-nums;
}

.rate-table th,
.rate-table td{
  white-space: nowrap;
  border: 1px solid var(--ring);
}

.rate-table tr > * { border-right: 0; border-bottom: 0; }
.rate-table tr > *:last-child { border-right: 1px solid var(--ring); }
.rate-table tr:last-child > * { border-bottom: 1px solid var(--ring); }

.rate-table thead th{
  position: sticky;
  top: 0;
  background:#f8f8f8;
  z-index: 3; /* above body cells */
}


.rate-table .sticky-col{
  position: sticky;
  left: 0;
  background: #fff;
  z-index: 4;
}


.rate-table .section-row th{
  padding:10px; background:#f3f4f6; text-align:left; border-left:0; border-right:0;
}

.rate-table thead th{
  position: sticky;
  top: 0;
  background: #f8f8f8;
  z-index: 3;
}

.rate-table thead .sticky-col{ z-index: 5; }


.rate-table .section-row .sticky-col{ background:#f3f4f6; z-index:4 }
.rate-table td:not(.sticky-col), .rate-table th:not(.sticky-col){ text-align:right }

@media (max-width:640px){
  .rate-table{ font-size:12px }
  .rate-table th,.rate-table td{ padding:6px }
}


/* --- TV table column UX --- */
.rate-table th.dur,
.rate-table td[data-dur] { cursor: pointer; }

/* selected column */
.rate-table th.col-active,
.rate-table td.col-active { background: #f6d809 !important; }

/* hover preview (non-selected) */
.rate-table th.col-hover:not(.col-active),
.rate-table td.col-hover:not(.col-active) { background: #fffaf0 !important; }

/* (optional) smoother hover on desktops */
@media (hover: hover) and (pointer: fine){
  .rate-table th.dur,
  .rate-table td[data-dur] { transition: background-color .12s ease; }
}


/* --- TV tech spec block --- */
.tv-tech{
  margin-top:12px;
  background:#fff;
  border:1px solid var(--ring);
  border-radius:12px;
  padding:12px 14px;
  box-shadow:var(--shadow);
  font-size:13px;
  color:#111;
}
.tv-tech h3{ margin:0 0 10px 0; font-size:14px; text-transform:uppercase; letter-spacing:.3px; }
.tv-tech dl{
  margin:0;
  display:grid;
  grid-template-columns: 180px 1fr;
  gap:6px 12px;
}
.tv-tech dt{ font-weight:700; }
.tv-tech dd{ margin:0; }

/* --- print spec block --- */
.print-tech{
  margin-top:12px;
  background:#fff;
  border:1px solid var(--ring);
  border-radius:12px;
  padding:12px 14px;
  box-shadow:var(--shadow);
  font-size:13px;
  color:#111;
}
.print-tech h3{
  margin:0 0 10px 0;
  font-size:14px;
  text-transform:uppercase;
  letter-spacing:.3px;
}
.print-tech ul{
  margin:0;
  padding-left:18px;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.print-tech .note{
  margin-top:10px;
  color:var(--muted);
  font-size:12px;
}


/* ============================
   Section bar with SVG tail
   ============================ */
.section-head::after{
  content:"";
  flex:1 1 auto;
  height:var(--bar-h-sm);
  background:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='148' height='14' viewBox='0 0 148 14' fill='none'><path d='M8.20117 0H0L0.0117188 13.9785L8.20117 0ZM22.1719 0H12.0762L3.87598 14H13.9707L22.1719 0ZM36.1533 0H25.6748L17.4736 14H27.9424L36.1533 0ZM50.124 0H39.2822L31.0811 14H41.9229L50.124 0ZM64.0947 0H52.8799L44.6787 14H55.8945L64.0947 0ZM78.0664 0H66.4873L58.2861 14H69.8652L78.0664 0ZM92.0479 0H80.0859L71.8848 14H83.8467L92.0479 0ZM106.019 0H93.6934L85.4824 14H97.8174L106.019 0ZM119.99 0H107.291L99.0908 14H111.789L119.99 0ZM133.971 0H120.899L112.688 14H125.761L133.971 0ZM139.741 14L147.942 0H134.497L126.296 14H139.741ZM148 0.164088L139.895 14H148V0.164088Z' fill='%23E20613'/></svg>") right center / var(--tail-w-sm) 100% no-repeat,
    linear-gradient(var(--brand-red), var(--brand-red)) left / calc(100% - var(--tail-w-sm)) 100% no-repeat;
}
@media (min-width:1024px){
  .section-head::after{
    height:var(--bar-h-lg);
    background:
      url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='185' height='16' viewBox='0 0 185 16' fill='none'><path d='M9.92676 0H0L0.0141602 15.973L9.92676 0ZM26.8315 0H14.6128L4.68604 16H16.9048L26.8315 0ZM43.7476 0H31.1826L21.2559 16H33.8208L43.7476 0ZM60.6523 0H47.752L37.8252 16H50.7256L60.6523 0ZM77.5566 0H64.3208L54.394 16H67.6299L77.5566 0ZM94.4614 0H80.8896L70.9629 16H84.5347L94.4614 0ZM111.378 0H97.4707L87.5439 16H101.452L111.378 0ZM128.283 0H114.028L104.101 16H118.356L128.283 0ZM145.187 0H130.597L120.67 16H135.26L145.187 0ZM162.103 0H147.166L137.239 16H152.176L162.103 0ZM168.814 16L178.741 0H162.539L152.612 16H168.814ZM178.999 0.187529L169.001 16H178.999V0.187529Z' fill='%23E20613'/></svg>") right center / var(--tail-w-lg) 100% no-repeat,
      linear-gradient(var(--brand-red), var(--brand-red)) left / calc(100% - var(--tail-w-lg)) 100% no-repeat;
  }
}

/* ===== HERO INTRO (sec-abola) ===== */
.hero{
  position:relative;
  width:100%;
  max-width:none;
  margin:0;
  padding:0;
  background:#e20613;
  color:#fff;
  min-height:100vh;     /* full viewport */
  display:flex;
  align-items:center;
}
.hero-inner{
  max-width:1200px;     /* constrain content inside */
  margin:0 auto;
  padding:80px 24px 60px 24px;
  display:flex;
  flex-direction:column;
  gap:24px;
}



/* ===== HERO ONLY: diagonal-cut photo background ===== */
#head-abola.hero{
  /* provide your two images here */
  --hero-img-land: url("fundo1.png");
  --hero-img-port: url("fundo1portrait.png");

  position: relative;
  isolation: isolate;      /* keeps blend effects inside */
  background: #E20613;     /* brand red base */
  overflow: hidden;        /* hide the diagonal mask edges */
}

/* Photo layer */
#head-abola.hero::before{
  content:"";

   position:absolute; inset:0;
  /* ⬇ vignette on top, photo under it */
  background-image:
radial-gradient(ellipse at center,
      rgba(0,0,0,0) 45%,
      rgba(0,0,0,.22) 50%,
      rgba(0,0,0,.45) 65%,
      rgba(0,0,0,.72) 100%),
    var(--hero-img-land);
  background-repeat:no-repeat, no-repeat;
  background-size:cover, cover;
  background-position: center right, center right;
  background-repeat:no-repeat;
  background-size:cover;
  background-position: right center;     
  opacity:.9;

 
  mix-blend-mode:multiply;              
 filter: grayscale(100%) contrast(1.05) brightness(0.85);
  
  z-index:-2;
}





/* The diagonal red “cut” on the left that hides part of the image */
/*
#head-abola.hero::after{
  content:"";
  position:absolute; inset:0;
  background:#E20613;
  clip-path: polygon(0 0, 0% 0, 108% 390%, 0 100%);
  z-index:-1;  
}
*/


/* Keep the content safely above the effects */
#head-abola.hero .hero-inner{ position:relative; z-index:1; }

/* === Portrait tweaks: swap image & widen mask so text never clashes === */
@media (orientation: portrait){
  #head-abola.hero::before{
    background-image: var(--hero-img-port);

    background-position: 68% center; 
  }
  #head-abola.hero::after{
    /* a little wider wedge on phones so copy has more room */
    clip-path: polygon(0 0, 52% 0, 70% 100%, 0 100%);
  }
}

/* Optional: very small screens—nudge the text padding in a bit */
@media (max-width: 480px){
  .branded-graphic{ max-width: clamp(260px, 82vw, 360px); }
}


@media (orientation: portrait){
  #head-abola.hero::after{
    content: none;         /* don’t create the pseudo-element */
    display: none;         /* fallback */
    background: none;      /* safety */
    clip-path: none;
    mask: none;
    -webkit-mask: none;
  }
}

/* Optional extra safety for very small screens that might not expose orientation */
@media (max-width: 680px){
  #head-abola.hero::after{
    content: none;
    display: none;
    background: none;
    clip-path: none;
    mask: none;
    -webkit-mask: none;
  }
}


/* Logo combo — scales with viewport, keeps SMG ~18% taller than A BOLA */
.hero-logo-combo{
  /* desktop-ish baseline, auto-scales with vw; capped both ways */
  --abolaH: clamp(40px, 7.2vw, 100px);
  --smgH: calc(var(--abolaH) * 1.18);

  display:flex;
  align-items:flex-end;     /* align to baseline edge like in print */
  gap:16px;
  margin-bottom:20px;
  flex-wrap:nowrap;         /* keep side-by-side */
}

.hero-logo-abola{
  height:var(--abolaH);
  width:auto;
  display:block;
}

.hero-logo-smg{
  height:var(--smgH);
  width:auto;
  display:block;
}

/* Tight phones: nudge sizes down slightly so they stay harmonious */
@media (max-width:480px){
  .hero-logo-combo{
    --abolaH: clamp(32px, 9.5vw, 56px);
    --smgH: calc(var(--abolaH) * 1.18);
    gap:12px;
  }
}

/* Micro screens: allow wrap if it truly can’t fit side-by-side */
@media (max-width:360px){
  .hero-logo-combo{ flex-wrap:wrap; align-items:center; }
  .hero-logo-smg{ order:2; }  /* keeps A BOLA on top if it wraps */
}


.hero-title {
  margin: 0;
  line-height: 1.2;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 2px; /* controla o espaço entre as duas linhas */
  text-transform: uppercase;
}

.hero-title .main {
  font-size: 2.6rem;
  font-weight: 800;
}

.hero-title .sub {
  font-size: 1.6rem;
  font-weight: 600;
  opacity: 0.9;
  margin-left: 4px; /* ligeiro recuo para colar no texto de cima */
  color: #f6d809;
}



.hero-metrics{ display:flex; gap:32px; flex-wrap:wrap;text-transform: uppercase;}
.metric .num{ font-size:2rem; font-weight:800; }
.metric .label{ font-size:0.9rem; opacity:.9; }
.hero-social{ display:flex; flex-wrap:wrap; gap:12px; }
.s-item{ background:rgba(255,255,255,.15); padding:6px 12px; border-radius:999px; font-size:0.9rem; }
.hero-audience{ font-size:0.95rem; line-height:1.5; }
.hero-video-wrap{ margin-top:20px; max-width:720px; border-radius:12px; overflow:hidden; box-shadow:0 4px 16px rgba(0,0,0,.25); }
.hero-video-wrap video{ width:100%; height:auto; display:block; }
.hero-footnote{ font-size:0.75rem; opacity:.8; margin-top:12px; }

@media(max-width:680px){
  .hero-inner{ padding:60px 16px 40px 16px; }
 .hero-title .main { font-size: 1.8rem; }
  .hero-title .sub  { font-size: 1.2rem; }
}


/* Condições — masonry-style columns (no big gaps) */
#sec-condicoes .doc{
  font-size:15px;
  line-height:1.65;
}

.terms-wrap{ width:100%; }

/* ⬇️ Multi-column layout instead of grid */
.terms{
  list-style:none;
  margin:0;
  padding:0;
  column-count:1;          /* 1 col on mobile */
  column-gap:28px;         /* space between columns */
}

@media (min-width:900px){
  .terms{ column-count:2; } /* 2 columns on desktop */
}

/* Keep each item intact within a column */
.terms li{
  break-inside:avoid;
  -webkit-column-break-inside:avoid;
  page-break-inside:avoid;
  display:flex;
  align-items:flex-start;
  gap:10px;
  margin:0 0 18px 0;       /* vertical spacing between items */
}

/* Number + text */
.terms .n{
  flex:0 0 auto;
  min-width:1.6em;
  font-weight:800;
  color:#111;
}
.terms p{
  margin:0;
  color:#111;
}

/* --- Collapsible brand bar (slides down/up) --- */
.masthead{ --brandH: 60px; } /* will be updated by JS to exact height */

.masthead > .brand{
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transform: translateY(-12px);
  transition:
    max-height .28s ease,
    opacity .18s ease,
    transform .28s ease;
}

/* When visible (after hero), it pushes the masthead down to its normal spot */
.masthead.show-brand > .brand{
  max-height: var(--brandH);
  opacity: 1;
  transform: translateY(0);
}

/* === HERO METRICS ROTATOR + SUBTLE BOTTOM ARROWS =======================
   Shows one .hero-metrics at a time; fade handled by JS. Arrows sit
   in a bottom bar so they never overlap the content.
======================================================================= */

/* Rotator stage reserves height equal to tallest slide */
#head-abola .metrics-rotator{
  position: relative;
  min-height: var(--rot-h, 0px);   /* set by JS */
  padding-bottom: 28px;            /* space reserved for the nav buttons */
}

/* Each metrics block becomes a slide inside the stage */
#head-abola .metrics-rotator .metrics-slide{
  position: absolute;
  inset: 0;
  width: 100%;
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition: opacity .4s ease;
}
#head-abola .metrics-rotator .metrics-slide.is-active{
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* Bottom nav bar (does not overlap content) */
#head-abola .metrics-rotator .hero-metrics-nav{
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 4px;
  pointer-events: none;    /* only buttons are interactive */
  z-index: 1;
}

/* Subtle ghost-style buttons that fit the hero */
#head-abola .metrics-rotator .nav-btn{
  pointer-events: auto;
  width: 34px;
  height: 34px;
  border-radius: 999px;
  background: rgba(0,0,0,.22);
  color: #fff;
  border: 1px solid rgba(255,255,255,.22);
  box-shadow: none;
  opacity: .6;
  transition:
    opacity .2s ease,
    transform .02s ease,
    background-color .2s ease,
    border-color .2s ease;
}
#head-abola .metrics-rotator .nav-btn:hover{
  opacity: 1;
  background: rgba(0,0,0,.32);
  border-color: rgba(255,255,255,.35);
}
#head-abola .metrics-rotator .nav-btn:active{
  transform: translateY(1px);
}
#head-abola .metrics-rotator .nav-btn svg{
  width: 18px;
  height: 18px;
  display: block;
}

/* Desktop: keep them ultra subtle until hover/focus */
@media (hover:hover) and (pointer:fine){
  #head-abola .metrics-rotator .nav-btn{ opacity: 0; }
  #head-abola .metrics-rotator:hover .nav-btn,
  #head-abola .metrics-rotator:focus-within .nav-btn{ opacity: .75; }
}

/* Small screens: slightly tighter footprint */
@media (max-width: 680px){
  #head-abola .metrics-rotator{ padding-bottom: 22px; }
  #head-abola .metrics-rotator .nav-btn{ width: 28px; height: 28px; opacity: .7; }
  #head-abola .metrics-rotator .nav-btn svg{ width: 16px; height: 16px; }
}

/* Optional: nudge buttons right to the edges a bit tighter*/
#head-abola .metrics-rotator .hero-metrics-nav{ padding: 0; }
#head-abola .metrics-rotator .nav-btn.prev{ margin-left: -6px; }
#head-abola .metrics-rotator .nav-btn.next{ margin-right: -6px; }


  </style>
</head>
<body> 


        <!-- Masthead -->
  <div class="masthead" id="masthead">
    <div class="brand">
      <div class="brand-inner">
        <div class="brand-left">
          <!-- SVG wordmark -->
        <svg width="238" height="30" viewBox="0 0 238 30" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <g clip-path="url(#clip0_7239_3186)">
            <path d="M19.49 23.4532H0V28.9703H19.49V23.4532Z" fill="#FAFAFA"/>
            <path d="M29.8917 1.02734H10.3555V6.54438H29.8917V1.02734Z" fill="#FAFAFA"/>
            <path d="M48.4851 23.4531H24.2422V28.9702H48.4851V23.4531Z" fill="#FAFAFA"/>
            <path d="M34.0416 18.1602H13.7031V20.4533H34.0416V18.1602Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M26.9629 1.02734H18.6631L2.63281 28.9705H10.9308L26.9629 1.02734Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M46.0283 28.9702H33.3741L17.3438 1.02702L29.9908 1.02344L46.0283 28.9702Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M182.014 23.4642H171.209V6.54438H176.862V1.02734H153.52V6.54438H158.989V23.4642H153.52V28.9705H187.645V18.1602H182.014V23.4642Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M102.457 12.6594H102.183C103.755 11.4672 104.689 9.56258 104.689 7.61139C104.689 4.05629 101.749 1.02747 98.1468 1.02747H66.5273V6.5445H72.1358V23.4536H66.5273V28.9707H102.453C107.035 28.9707 110.751 25.3225 110.751 20.8258C110.751 16.3291 107.037 12.6594 102.453 12.6594H102.457ZM83.2176 6.5445H92.4725C93.9311 6.5445 95.1852 7.75997 95.1852 9.25111C95.1852 10.7422 93.9311 11.913 92.4725 11.913H83.2176V6.5445ZM95.733 23.4304V23.4536H83.2176V18.0852H95.733C97.213 18.0852 98.4688 19.3006 98.4688 20.7918C98.4688 22.2829 97.2148 23.4304 95.733 23.4304Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M135.184 0H130.254C120.141 0 111.918 5.96814 111.918 13.2162V16.7838C111.918 24.0319 120.141 30 130.254 30H135.184C145.297 30 153.52 24.0337 153.52 16.7838V13.2162C153.52 5.96814 145.297 0 135.184 0ZM138.986 21.5257C138.986 22.5013 138.039 23.4537 137.002 23.4537H128.434C127.399 23.4537 126.451 22.5013 126.451 21.5257V8.42592C126.451 7.36082 127.331 6.58393 128.169 6.58393H137.266C138.103 6.58393 138.984 7.36082 138.984 8.42592V21.5257H138.986Z" fill="#FAFAFA"/>
            <path d="M209.002 23.4531H189.512V28.9702H209.002V23.4531Z" fill="#FAFAFA"/>
            <path d="M219.403 1.02734H199.867V6.54438H219.403V1.02734Z" fill="#FAFAFA"/>
            <path d="M238.001 23.4531H213.758V28.9702H238.001V23.4531Z" fill="#FAFAFA"/>
            <path d="M223.553 18.1602H203.215V20.4533H223.553V18.1602Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M216.475 1.02734H208.175L192.145 28.9705H200.443L216.475 1.02734Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M235.54 28.9705H222.888L206.855 1.02734H219.51L235.54 28.9705Z" fill="#FAFAFA"/>
          </g>
          <defs><clipPath id="clip0_7239_3186"><rect width="238" height="30" fill="white"/></clipPath></defs>
        </svg>
        </div>
        <a class="brand-contact" href="mailto:sales@abola.pt">CONTACTO</a>
      </div>
    </div>

    <div class="masthead-inner">
      <nav class="tabs main-tabs" id="mainTabs" aria-label="Categorias">
        <button data-medium="digital">Digital</button>
        <button data-medium="print">print</button>
        <button data-medium="tv">TV</button>
        <button data-medium="branded">Branded Content</button>
      </nav>
      <div class="context-slot">
        <nav class="tabs context-tabs" id="contextTabs" aria-label="Subcategoria"></nav>
      </div>
    </div>
  </div>

  <!--
  <div class="header-spacer" id="headerSpacer"></div>
  -->

  <!-- HERO SECTION (ABOLA INTRO) -->
  <section id="sec-abola" class="section">

    <header id="head-abola" class="hero" aria-label="A BOLA — introdução">
      <div class="hero-inner">



<div class="hero-logo-combo">


        <svg class="hero-logo-abola" width="238" height="30" viewBox="0 0 238 30" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <g clip-path="url(#clip0_7239_3186)">
            <path d="M19.49 23.4532H0V28.9703H19.49V23.4532Z" fill="#FAFAFA"/>
            <path d="M29.8917 1.02734H10.3555V6.54438H29.8917V1.02734Z" fill="#FAFAFA"/>
            <path d="M48.4851 23.4531H24.2422V28.9702H48.4851V23.4531Z" fill="#FAFAFA"/>
            <path d="M34.0416 18.1602H13.7031V20.4533H34.0416V18.1602Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M26.9629 1.02734H18.6631L2.63281 28.9705H10.9308L26.9629 1.02734Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M46.0283 28.9702H33.3741L17.3438 1.02702L29.9908 1.02344L46.0283 28.9702Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M182.014 23.4642H171.209V6.54438H176.862V1.02734H153.52V6.54438H158.989V23.4642H153.52V28.9705H187.645V18.1602H182.014V23.4642Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M102.457 12.6594H102.183C103.755 11.4672 104.689 9.56258 104.689 7.61139C104.689 4.05629 101.749 1.02747 98.1468 1.02747H66.5273V6.5445H72.1358V23.4536H66.5273V28.9707H102.453C107.035 28.9707 110.751 25.3225 110.751 20.8258C110.751 16.3291 107.037 12.6594 102.453 12.6594H102.457ZM83.2176 6.5445H92.4725C93.9311 6.5445 95.1852 7.75997 95.1852 9.25111C95.1852 10.7422 93.9311 11.913 92.4725 11.913H83.2176V6.5445ZM95.733 23.4304V23.4536H83.2176V18.0852H95.733C97.213 18.0852 98.4688 19.3006 98.4688 20.7918C98.4688 22.2829 97.2148 23.4304 95.733 23.4304Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M135.184 0H130.254C120.141 0 111.918 5.96814 111.918 13.2162V16.7838C111.918 24.0319 120.141 30 130.254 30H135.184C145.297 30 153.52 24.0337 153.52 16.7838V13.2162C153.52 5.96814 145.297 0 135.184 0ZM138.986 21.5257C138.986 22.5013 138.039 23.4537 137.002 23.4537H128.434C127.399 23.4537 126.451 22.5013 126.451 21.5257V8.42592C126.451 7.36082 127.331 6.58393 128.169 6.58393H137.266C138.103 6.58393 138.984 7.36082 138.984 8.42592V21.5257H138.986Z" fill="#FAFAFA"/>
            <path d="M209.002 23.4531H189.512V28.9702H209.002V23.4531Z" fill="#FAFAFA"/>
            <path d="M219.403 1.02734H199.867V6.54438H219.403V1.02734Z" fill="#FAFAFA"/>
            <path d="M238.001 23.4531H213.758V28.9702H238.001V23.4531Z" fill="#FAFAFA"/>
            <path d="M223.553 18.1602H203.215V20.4533H223.553V18.1602Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M216.475 1.02734H208.175L192.145 28.9705H200.443L216.475 1.02734Z" fill="#FAFAFA"/>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M235.54 28.9705H222.888L206.855 1.02734H219.51L235.54 28.9705Z" fill="#FAFAFA"/>
          </g>
          <defs><clipPath id="clip0_7239_3186"><rect width="238" height="30" fill="white"/></clipPath></defs>
        </svg>
  <img class="hero-logo-smg" src="ringierlogo.png" alt="Sports Media Group logo">
</div>

<h1 class="hero-title">
  <span class="main">N.º 1 do Desporto em Portugal</span>
  <span class="sub">há mais de 80 anos</span>
</h1>

        <p class="hero-sub">
          A BOLA lidera em alcance e engagement no desporto português — multiplataforma,
          credível e com formatos premium que geram resultados.
        </p>

        <div class="hero-metrics">
          <h3>SITE</h3>
          <div class="metric"><div class="num">105M</div><div class="label">Pageviews / mês</div></div>
          <div class="metric"><div class="num">29M</div><div class="label">Visitas / mês</div></div>
          <div class="metric"><div class="num">2M</div><div class="label">Utilizadores / mês</div></div>
          <div class="metric"><div class="num">13 minutos</div><div class="label">Tempo médio por sessão</div></div>
        </div>

        <div class="hero-metrics">
          <h3>SOCIAL MEDIA</h3>
          <div class="metric"><div class="num">1.2M</div><div class="label">Facebook</div></div>
          <div class="metric"><div class="num">213K</div><div class="label">Instagram</div></div>
          <div class="metric"><div class="num">244K</div><div class="label">TikTok</div></div>
          <div class="metric"><div class="num">210K</div><div class="label">X</div></div>
          <div class="metric"><div class="num">123K</div><div class="label">WhatsApp</div></div>
          <div class="metric"><div class="num">73K</div><div class="label">YouTube</div></div>
        </div>

          <div class="hero-metrics">
          <h3>PRINT</h3>
          <div class="metric"><div class="num">9,8%</div><div class="label">Audiência</div></div>
          <div class="metric"><div class="num">800K</div><div class="label">Readership</div></div>
          <div class="metric"><div class="num">22K</div><div class="label">circulação do jornal</div></div>
        </div>

          <div class="hero-metrics">
          <h3>ABOLA TV</h3>
          <div class="metric"><div class="num">300K</div><div class="label">Audiência</div></div>
          <div class="metric"><div class="num">24/7</div><div class="label">Emissão</div></div>
        </div>

        <!-- ===========================
     START: extra hero content
     =========================== -->


<!-- ===== HERO: painéis de audiência (Website/App e Social) ===== -->
<section class="hero-audience-panels" aria-label="Perfil de audiência">
  <!-- Website & Mobile App -->
 

</section>

<!-- =========================
     END: extra hero content
     ========================= -->



        <!--
        <div class="hero-social" aria-label="Audiências sociais">
          <div class="s-item"><span class="s-name">Facebook</span><span class="s-val">1.2M</span></div>
          <div class="s-item"><span class="s-name">Instagram</span><span class="s-val">980K</span></div>
          <div class="s-item"><span class="s-name">X</span><span class="s-val">450K</span></div>
          <div class="s-item"><span class="s-name">TikTok</span><span class="s-val">620K</span></div>
          <div class="s-item"><span class="s-name">YouTube</span><span class="s-val">210K</span></div>
        </div>

        <div class="hero-audience">
          <div class="aud-row">
            <strong>Idade</strong> · 18–24 (18%) · 25–34 (27%) · 35–44 (24%) · 45–54 (17%) · 55+ (14%)
          </div>
          <div class="aud-row">
            <strong>Classe</strong> · AB (38%) · C1 (34%) · C2 (20%) · DE (8%)
          </div>
        </div>

        <div class="hero-video-wrap" aria-label="Destaques em vídeo">
          <video src="intro-highlight.mp4" autoplay muted loop playsinline></video>
        </div>

        <div class="hero-footnote">
          * Fontes indicativas — substituir pelos valores mais recentes (AT Internet / GA4 / redes).
        </div>

        -->
      </div>
    </header>
  </section>

  <!-- Other sections -->
  <section id="sec-digital" class="section">
    <div class="section-head" id="head-digital"><h2>Digital</h2></div>
    <main id="gridDigital" class="grid"></main>
  </section>

  <section id="sec-print" class="section">
    <div class="section-head" id="head-print"><h2>print</h2></div>
    <div id="printNotice" class="print-note"></div>
    <main id="gridprint" class="grid"></main>
  </section>

  <section id="sec-tv" class="section">
    <div class="section-head" id="head-tv"><h2>TV</h2></div>
    <section id="tvPanel" class="tv-panel"></section>
  </section>

  <section id="sec-branded" class="section">
    <div class="section-head" id="head-branded"><h2>Branded Content</h2></div>
    <!-- Branded intro block -->
<section class="branded-hero" aria-labelledby="branded-hero-title">
  <div class="branded-copy">
    <h3 id="branded-hero-title" class="brand-kicker">O PODER DO CONTEÚDO</h3>

    <p>
      O Branded content transcende as fronteiras do marketing tradicional,
      oferecendo valor genuíno ao público enquanto promove a identidade e os
      valores da marca.
    </p>

    <p>
      Assim, criamos projetos 360º para marcas, sob medida, com uma abordagem criativa
      e estratégica, através de narrativas que inspirem, eduquem ou entretenham.
    </p>

    <p>
      Seja por meio de artigos ou entrevistas, vídeos ou experiências interativas,
      tudo é produzido com a curadoria d’A BOLA.
    </p>

  </div>
<figure class="branded-graphic" aria-label="Canais de distribuição de branded content">
  <svg viewBox="0 0 600 600" role="img" aria-hidden="true" preserveAspectRatio="xMidYMid meet">
    <!-- outer ring -->
    <circle cx="300" cy="300" r="210" fill="none" stroke="var(--brand-red)" stroke-width="10"/>

    <!-- shared icon styling -->
    <defs>
      <g id="icon-newspaper" fill="none" stroke="#fff" stroke-width="6" stroke-linecap="round" stroke-linejoin="round">
        <!-- 56x70 centered -->
        <rect x="-28" y="-35" width="56" height="70" rx="6"/>
        <rect x="-18" y="-29" width="36" height="12" rx="2"/>
        <line x1="-18" y1="-10" x2="18" y2="-10"/>
        <line x1="-18" y1="2"   x2="18" y2="2"/>
        <line x1="-18" y1="14"  x2="18" y2="14"/>
      </g>

      <g id="icon-monitor" fill="none" stroke="#fff" stroke-width="6" stroke-linecap="round" stroke-linejoin="round">
        <!-- 72x44 centered -->
        <rect x="-36" y="-22" width="72" height="44" rx="6"/>
        <line x1="0" y1="22" x2="0" y2="34"/>
        <rect x="-14" y="34" width="28" height="8" rx="2"/>
      </g>

      <g id="icon-tv" fill="none" stroke="#fff" stroke-width="6" stroke-linecap="round" stroke-linejoin="round">
        <!-- 72x44 centered -->
        <rect x="-36" y="-22" width="72" height="44" rx="6"/>
        <line x1="-20" y1="22" x2="-26" y2="34"/>
        <line x1="20"  y1="22" x2="26"  y2="34"/>
      </g>

      <g id="icon-phone" fill="none" stroke="#fff" stroke-width="6" stroke-linecap="round" stroke-linejoin="round">
        <!-- 40x60 centered -->
        <rect x="-20" y="-30" width="40" height="60" rx="8"/>
        <rect x="-14" y="-22" width="28" height="40" rx="2"/>
        <circle cx="0" cy="26" r="3" fill="#fff" stroke="none"/>
      </g>
    </defs>

    <!-- TOP (newspaper) -->
    <g transform="translate(300,90)">
      <circle r="86" fill="var(--brand-red)"/>
      <use href="#icon-newspaper"/>
    </g>

    <!-- RIGHT (monitor) -->
    <g transform="translate(510,300)">
      <circle r="86" fill="var(--brand-red)"/>
      <use href="#icon-monitor"/>
    </g>

    <!-- BOTTOM (tv) -->
    <g transform="translate(300,510)">
      <circle r="86" fill="var(--brand-red)"/>
      <use href="#icon-tv"/>
    </g>

    <!-- LEFT (phone) -->
    <g transform="translate(90,300)">
      <circle r="86" fill="var(--brand-red)"/>
      <use href="#icon-phone"/>
    </g>
  </svg>
</figure>

</section>

    <main id="gridBranded" class="grid"></main>
  </section>

  <section id="sec-condicoes" class="section">
    <div class="section-head" id="head-condicoes"><h2>Condições Gerais</h2></div>
    <div id="condicoesBody" class="doc">

<div class="terms-wrap">
  <ol class="terms">
    <li>
      <span class="n">1.</span>
      <p>A Sociedade Vicra Desportiva, S.A. rege-se pelas presentes condições gerais contratuais, bem como pelo Código da Publicidade e restante legislação aplicável.</p>
    </li>
    <li>
      <span class="n">2.</span>
      <p>A Sociedade Vicra Desportiva, S.A. reserva o direito de não inserir publicidade que não esteja em harmonia com a sua orientação ética.</p>
    </li>
    <li>
      <span class="n">3.</span>
      <p>A Sociedade Vicra Desportiva, S.A. reserva o direito de adiar inserções de publicidade sempre que as circunstâncias o imponham.</p>
    </li>
    <li>
      <span class="n">4.</span>
      <p>O conteúdo das inserções, assim como o material a ser fornecido para as mesmas, é da inteira responsabilidade do cliente. A Sociedade Vicra Desportiva, S.A. não se responsabiliza pela perda ou danos causados aos materiais fornecidos para publicação. A entrega de materiais em suporte físico cabe ao anunciante ou ao seu representante efetuar a recolha no prazo máximo de 2 meses após a data de entrega, sob pena de serem destruídos.</p>
    </li>
    <li>
      <span class="n">5.</span>
      <p>A Sociedade Vicra Desportiva, S.A. não se responsabiliza, para além da repetição correta, por inserções com erros, lapsos ou omissões que lhe sejam imputáveis.</p>
    </li>
    <li>
      <span class="n">6.</span>
      <p>Toda a reclamação deverá ser feita, por escrito, até 5 dias úteis após a data de publicação do anúncio.</p>
    </li>
    <li>
      <span class="n">7.</span>
      <p>Os Anunciantes ou os seus representantes serão exclusivamente responsáveis pelo conteúdo publicitário e pelas consequências da sua publicação pela Sociedade Vicra Desportiva, S.A., bem como por todo e qualquer direito ou autorização de terceiros relativos à publicidade a publicar, nomeadamente direitos de autor ou outros. A Sociedade Vicra Desportiva, S.A. terá direito de regresso sobre os anunciantes e seus representantes por qualquer coima, multa, indemnização ou outros encargos decorrentes de incumprimento legal ou contratual de normas aplicáveis ao conteúdo da publicidade publicada.</p>
    </li>
    <li>
      <span class="n">8.</span>
      <p>Em todas as ordens de publicação firmadas pelos anunciantes ou agências presume-se o conhecimento e aceitação da tabela de publicidade e das presentes condições gerais.</p>
    </li>
    <li>
      <span class="n">9.</span>
      <p>Para execução de todas as questões emergentes ou interpretações deste contrato, as partes consideram competente o tribunal da comarca de Lisboa, com expressa recusa de qualquer outro.</p>
    </li>
  </ol>
</div>


    </div>
  </section>

  <footer class="site-footer">
    
    © — All rights reserved.
  </footer>

  <!-- Drawer -->
  <div class="scrim" id="scrim"></div>
  <aside class="drawer" id="drawer">
    <header class="drawer-head">
      <div class="title-wrap">
        <h2 id="drawerTitle" class="drawer-title">Title</h2>
        <div class="muted" id="drawerTags">—</div>
      </div>
      <button id="closeDrawerBtn" class="close-drawer" aria-label="Fechar painel">
  <svg class="x" viewBox="0 0 24 24" aria-hidden="true">
    <path d="M6 6 L18 18 M18 6 L6 18" stroke-linecap="round" stroke-width="2.5" fill="none"/>
  </svg>
</button>


    </header>
    <div class="drawer-content">
      <section><div id="preview" class="preview"></div></section>
      <section id="specSection" class="specs" style="display:none"><dl id="specList"></dl></section>
    </div>
  </aside>




  <script>
// ---------------- Data ----------------
const DIGITAL = [
  { id:'intro', medium:'digital', subtype:'rich-media', name:'Intro', summary:'Full-screen intro unit on entry.',
    peek:'800×600 / 768×1024 • ≤254KB (img) • MP4 ≤1MB', art:'digital/intro.png', video:'digital/intro.mp4',
    specs:{ 'Dimensions':'800×600 px and 768×1024 px', 'File types':'JPG / PNG / GIF / MP4', 'Max weight':'254 KB (images), MP4 up to 1 MB', 'Visible on':'desktop, tablet, smartphone', 'CPM':'ROS/HP 240 € · Canais 260 €' }
  },
  { id:'billboard-xxl', medium:'digital', subtype:'display', name:'Billboard XXL', summary:'High-impact header canvas.',
    peek:'Specs on request • ≤500KB', art:'digital/intro.png', video:'digital/intro.mp4', gradient:['#f59e0b','#e5e7eb'],
    specs:{ 'Dimensions':'On request', 'File types':'JPG / PNG / GIF / MP4', 'Max weight':'500 KB', 'Visible on':'desktop, tablet, smartphone', 'CPM':'HP 230 €' }
  },
  { id:'cube-spin', medium:'digital', subtype:'rich-media', name:'Cube Spin', summary:'Interactive 3D cube gallery.',
    peek:'(300×300)×6 • ≤480KB • JPG/PNG',art:'digital/intro.png', video:'digital/intro.mp4',  gradient:['#fb7185','#dc2626'],
    specs:{ 'Dimensions':'(300×300 px) × 6 tiles', 'File types':'JPG / PNG', 'Max weight':'480 KB', 'Visible on':'desktop, tablet, smartphone', 'CPM':'ROS 170 €' }
  },
  { id:'ticker', medium:'digital', subtype:'display', name:'Ticker', summary:'Persistent news ticker band.',
    peek:'728×90 (D) • 320×100 (M) • ≤120KB', art:'digital/intro.png', video:'digital/intro.mp4', gradient:['#e5e7eb','#f87171'],
    specs:{ 'Dimensions':'728×90 (desktop), 320×100 (smartphone)', 'File types':'JPG / PNG / GIF', 'Max weight':'120 KB', 'Visible on':'desktop, tablet, smartphone', 'CPM':'ROS 190 €' }
  },
  { id:'moldura', medium:'digital', subtype:'display', name:'Moldura', summary:'Framed page skin variant.',
    peek:'Framing unit • spec template', art:'digital/intro.png', video:'digital/intro.mp4', gradient:['#ef4444','#f3f4f6'],
    specs:{ 'Dimensions':'Framing template', 'File types':'JPG / PNG / GIF', 'Max weight':'—', 'Visible on':'desktop, tablet, smartphone', 'CPM':'Consult' }
  },
  { id:'takeover', medium:'digital', subtype:'rich-media', name:'Takeover',  summary:'Billboard + Halfpage + MREC orchestration.',
    peek:'HTML/IMG/MP4 • 50KB img • MP4 ≤1MB', art:'digital/intro.png', video:'digital/intro.mp4', gradient:['#b91c1c','#e5e7eb'],
    specs:{ 'Dimensions':'Billboard + Halfpage + MREC', 'File types':'HTML / JPG / PNG / GIF / MP4', 'Max weight':'50 KB (images), MP4 up to 1 MB', 'Visible on':'desktop', 'CPM':'POA (24h takeover available)' }
  },
  { id:'mrec', medium:'digital', subtype:'display', name:'MREC', summary:'Standard 300×250 placement.',
    peek:'300×250 • ≤75KB • MP4 ≤500KB', art:'digital/intro.png', video:'digital/intro.mp4', gradient:['#ef4444','#fbbf24'],
    specs:{ 'Dimensions':'300×250 px', 'File types':'HTML / JPG / PNG / GIF / MP4', 'Max weight':'75 KB (images), MP4 up to 500 KB', 'Visible on':'desktop, tablet, smartphone', 'CPM':'ROS/HP 90 € · Canais 110 €' }
  },
  { id:'halfpage', medium:'digital', subtype:'display', name:'Halfpage', summary:'Tall 300×600 canvas.',
    peek:'300×600 • ≤120KB • MP4 ≤1MB', art:'digital/intro.png', video:'digital/intro.mp4', gradient:['#f97316','#fecaca'],
    specs:{ 'Dimensions':'300×600 px', 'File types':'HTML / JPG / PNG / MP4', 'Max weight':'120 KB (images), MP4 máx. 1 MB', 'Visible on':'desktop, tablet, smartphone', 'CPM':'ROS/HP 110 € · Canais 130 €' }
  },
  { id:'billboard', medium:'digital', subtype:'display', name:'Billboard', summary:'Hero banner across devices.',
    peek:'1260×220 / 970×250 (D) · 728×90 (T) · 310×100 (M) • ≤200KB • MP4 ≤1MB', gradient:['#fca5a5','#fde68a'],
    specs:{ 'Dimensions':'1260×220 px or 970×250 px (desktop); 728×90 px (tablet); 310×100 px (smartphone) — or external responsive tag', 'File types':'HTML / JPG / PNG / GIF / MP4', 'Max weight':'200 KB (images), MP4 máx. 1 MB', 'Visible on':'desktop, tablet, smartphone', 'CPM':'ROS/HP 200 €' }
  },
  { id:'preroll', medium:'digital', subtype:'rich-media', name:'Pre-roll', summary:'In-player video ad before content.',
    peek:'640×480 • MP4 • ≤10MB', gradient:['#111827','#6b7280'],
    specs:{ 'Dimensions':'640×480 px', 'File types':'MP4', 'Max weight':'10 MB', 'Visible on':'desktop, tablet, smartphone', 'CPM':'ROS/HP 240 € · Canais 260 €' }
  },
  { id:'skyscraper', medium:'digital', subtype:'display', name:'Sky-scrapper', summary:'Vertical 120×600 banner (desktop/tablet).',
    peek:'120×600 • ≤120KB', gradient:['#e5e7eb','#9ca3af'],
    specs:{ 'Dimensions':'120×600 px', 'File types':'JPG / PNG / GIF', 'Max weight':'120 KB', 'Visible on':'desktop, tablet', 'CPM':'ROS/HP — € · Canais — €' }
  },
  { id:'incontent-video', medium:'digital', subtype:'rich-media', name:'In-content Video', summary:'Inline video inside article body.',
    peek:'640×480 • MP4/WEBM • ≤950KB', gradient:['#f87171','#ef4444'],
    specs:{ 'Dimensions':'640×480 px', 'File types':'MP4 / WEBM', 'Max weight':'950 KB', 'Visible on':'desktop, tablet, smartphone', 'CPM':'Interior Artigos 160 € · CPV sob consulta' }
  },
  { id:'open-door', medium:'digital', subtype:'rich-media', name:'Open Door', summary:'Center reveal with perspective walls.',
    peek:'768×1024 & 800×600 • ≤950KB', gradient:['#f43f5e','#fb7185'],
    specs:{ 'Dimensions':'768×1024 px and 800×600 px', 'File types':'JPG / PNG / MP4', 'Max weight':'950 KB', 'Visible on':'desktop, tablet, smartphone', 'CPM':'ROS/HP 320 €' }
  },
  { id:'top-scroll', medium:'digital', subtype:'rich-media', name:'Top Scroll', summary:'Scroll-reactive top unit.',
    peek:'Dims: variable (X×X) • ≤950KB', gradient:['#fecaca','#fef3c7'],
    specs:{ 'Dimensions':'Variable (X × X)', 'File types':'JPG / PNG', 'Max weight':'950 KB', 'Visible on':'desktop, tablet, smartphone', 'CPM':'Interior Artigos — €' }
  },
  { id:'galeria', medium:'digital', subtype:'rich-media', name:'Galeria', summary:'Carousel gallery inside articles.',
    peek:'300×300 • 6–12 slides • ≤250KB', gradient:['#fda4af','#fef08a'],
    specs:{ 'Dimensions':'300×300 px', 'Slides':'Recommended 6 to 12', 'File types':'JPG / PNG', 'Max weight':'250 KB', 'Visible on':'desktop, tablet, smartphone', 'CPM':'Interior Artigos 240 €' }
  },
  { id:'parallax', medium:'digital', subtype:'rich-media', name:'Parallax', summary:'Scroll-tied background motion.',
    peek:'720×1280 • JPG/PNG/MP4 • ≤950KB', gradient:['#fecaca','#f87171'],
    specs:{ 'Dimensions':'720×1280 px', 'File types':'JPG / PNG / MP4', 'Max weight':'950 KB', 'Visible on':'desktop, tablet, smartphone', 'CPM':'Interior Artigos 260 €' }
  }
];

const print = [
  { id:'capa-modular', medium:'print', subtype:'capa', name:'Capa — Modular', summary:'Valor por número de módulos (grelha 5×20 = 100).',
    grid:{ cols:5, rows:20, hot:'all' }, peek:'Mancha 25,9×30,2 cm • 5 col • 20 módulos/col',
    specs:{ 'Mancha de impressão':'25,9 × 30,2 cm', 'Colunas':5, 'Módulos por coluna':20, 'Módulos por página':100, 'Medida do módulo':'4,78 × 1,20 cm' },
    pricing:{ type:'per_module', Base:null }
  },
  { id:'capa-rodape', medium:'print', subtype:'capa', name:'Capa — Rodapé', art:'print/rodape.png', summary:'Faixa inferior em toda a largura.',
    grid:{ cols:5, rows:2, hot:'bottom' }, peek:'Faixa • 5 col × 2 módulos',
    specs:{ 'Mancha útil':'25,9 × 30,2 cm (faixa)', 'Colunas':5, 'Módulos por coluna':2, 'Base':'2 230,00 €' }, pricing:{ type:'fixed', amount:2230.00 } },
  { id:'capa-rodatopo', medium:'print', subtype:'capa', name:'Capa — Roda-topo', art:'print/rodatopo.png', summary:'Faixa superior em toda a largura.',
    grid:{ cols:5, rows:2, hot:'all' }, peek:'Topo • 5 col × 2 módulos',
    specs:{ 'Mancha útil':'25,9 × 2,7 cm', 'Colunas':5, 'Módulos por coluna':2, 'Base':'3 450,00 €' }, pricing:{ type:'fixed', amount:3450.00 } },
  { id:'capa-orelha', medium:'print', subtype:'capa', name:'Capa — Orelha', art:'print/orelha.png', summary:'Bloco lateral superior.',
    grid:{ cols:1, rows:3, hot:'right' }, peek:'4,78 × 4,2 cm • 1 col',
    specs:{ 'Mancha útil':'4,78 × 4,2 cm', 'Colunas':1, 'Módulos por coluna':3, 'Base':'1 990,00 €' }, pricing:{ type:'fixed', amount:1990.00 } },
  { id:'capa-coluna', medium:'print', subtype:'capa', name:'Capa — Coluna',  art:'print/coluna.png', summary:'Coluna vertical lateral.',
    grid:{ cols:1, rows:20, hot:'right' }, peek:'30,2 × 4,78 cm • 1 col',
    specs:{ 'Mancha útil':'30,2 × 4,78 cm', 'Colunas':1, 'Módulos por coluna':20, 'Base':'25 000,00 €' }, pricing:{ type:'fixed', amount:25000.00 } },
  { id:'capa-takeover', medium:'print', subtype:'capa', name:'Capa — Takeover',  art:'print/takeover.png', summary:'Faixa topo + coluna lateral.',
    grid:{ cols:1, rows:20, hot:'all' }, peek:'2,7×25,9 + 30,2×4,78 (zona lateral)',
    specs:{ 'Mancha útil':'2,7 × 25,9 + 30,2 × 4,78 cm (zona lateral)', 'Colunas':1, 'Módulos por coluna':20, 'Base':'37 500,00 €' }, pricing:{ type:'fixed', amount:37500.00 } },

  { id:'interior-pagina', medium:'print', subtype:'interior', name:'Página', art:'print/pagina.png',  summary:'5 colunas × 20 módulos — página inteira.',
    grid:{ cols:5, rows:20, hot:'all' }, peek:'Mancha 25,9×30,2 • 100 módulos',
    specs:{ 'Mancha útil':'25,9 × 30,2 cm', 'Colunas':5, 'Módulos por coluna':20, 'Total de módulos':100,
      'Base DC Par':'8 940,00 €', 'Sobretaxa DC Ímpar 15%':'10 281,00 €', 'Sobretaxa AC Ímpar 30%':'11 622,00 €', 'Sobretaxa AC Par 10%':'9 834,00 €'} },
 
      { id:'interior-junior', medium:'print', subtype:'interior', name:'Junior Page',  art:'print/juniorpage.png', summary:'4 colunas × 12 módulos.',
    grid:{ cols:4, rows:12, hot:'bottom' }, peek:'Mancha 20,62×18 • 48 módulos',
    specs:{ 'Mancha útil':'20,62 × 18 cm', 'Colunas':4, 'Módulos por coluna':12, 'Total de módulos':48,
      'Base DC Par':'4 967,00 €', 'Sobretaxa DC Ímpar 15%':'5 712,05 €', 'Sobretaxa AC Ímpar 30%':'6 457,60 €', 'Sobretaxa AC Par 10%':'5 463,70 €' } },
  
  { id:'interior-meia-h', medium:'print', subtype:'interior', name:'1/2 Página (Horizontal)', art:'print/1-2paghorz.png', summary:'5 colunas × 10 módulos.',
    grid:{ cols:5, rows:10, hot:'bottom' }, peek:'Mancha 25,9×14,9 • 50 módulos',
    specs:{ 'Mancha útil':'25,9 × 14,9 cm', 'Colunas':5, 'Módulos por coluna':10, 'Total de módulos':50,
      'Base DC Par':'4 386,00 €', 'Sobretaxa DC Ímpar 15%':'5 043,90 €', 'Sobretaxa AC Ímpar 30%':'5 701,80 €', 'Sobretaxa AC Par 10%':'4 824,60 €' } },






      { id:'interior-meia-v-2c', medium:'print', subtype:'interior', name:'1/2 Página (Vertical — 2 col.)', art:'print/meiapagina2colunas.png', summary:'2 colunas × 20 módulos.',
    grid:{ cols:2, rows:20, hot:'right' }, peek:'Mancha 10,06×30,2 • 40 módulos',
    specs:{ 'Mancha útil':'10,06 × 30,2 cm', 'Colunas':2, 'Módulos por coluna':20, 'Total de módulos':40,
      'Base DC Par':'3 612,00 €', 'Sobretaxa DC Ímpar 15%':'4 153,80 €', 'Sobretaxa AC Ímpar 30%':'4 695,60 €', 'Sobretaxa AC Par 10%':'3 973,20 €' } },
  { id:'interior-meia-v-3c', medium:'print', subtype:'interior', name:'1/2 Página (Vertical — 3 col.)', art:'print/meiapagina3colunasvert.png', summary:'3 colunas × 20 módulos.',
    grid:{ cols:3, rows:20, hot:'right' }, peek:'Mancha 15,34×30,2 • 60 módulos',


    specs:{ 'Mancha útil':'15,34 × 30,2 cm', 'Colunas':3, 'Módulos por coluna':20, 'Total de módulos':60,
      'Base DC Par':'5 160,00 €', 'Sobretaxa DC Ímpar 15%':'5 934,00 €', 'Sobretaxa AC Ímpar 30%':'6 708,00 €', 'Sobretaxa AC Par 10%':'5 676,00 €' } },
  
      { id:'interior-um-quarto-h', medium:'print', subtype:'interior', name:'1/4 Página (Horizontal)', art:'print/quartopaginahorz.png', summary:'5 colunas × 5 módulos.',
    grid:{ cols:5, rows:5, hot:'bottom' }, peek:'Mancha 25,9×7,2 • 25 módulos',

    
    specs:{ 'Mancha útil':'25,9 × 7,2 cm', 'Colunas':5, 'Módulos por coluna':5, 'Total de módulos':25,
      'Base DC Par':'3 000,00 €', 'Sobretaxa DC Ímpar 15%':'3 450,00 €', 'Sobretaxa AC Ímpar 30%':'3 900,00 €', 'Sobretaxa AC Par 10%':'3 300,00 €' } },
 
 
      { id:'interior-um-quarto-3c', medium:'print', subtype:'interior', name:'1/4 Página (3 colunas)',  art:'print/quartopagina3colunas.png', summary:'3 colunas × 10 módulos.',
    grid:{ cols:3, rows:10, hot:'all' }, peek:'Mancha 15,34×14,9 • 30 módulos',
    specs:{ 'Mancha útil':'15,34 × 14,9 cm', 'Colunas':3, 'Módulos por coluna':10, 'Total de módulos':30,
      'Base DC Par':'2 773,50 €', 'Sobretaxa DC Ímpar 15%':'3 189,53 €', 'Sobretaxa AC Ímpar 30%':'3 605,55 €', 'Sobretaxa AC Par 10%':'3 050,85 €' } },




  { id:'interior-um-quarto-2c', medium:'print', subtype:'interior', name:'1/4 Página (2 colunas)', art:'print/quartopagina2colunas.png', summary:'2 colunas × 10 módulos.',
    grid:{ cols:2, rows:10, hot:'right' }, peek:'Mancha 10,06×30,2 • 40 módulos',
    specs:{ 'Mancha útil':'10,06 × 30,2 cm', 'Colunas':2, 'Módulos por coluna':10, 'Total de módulos':40,
      'Base DC Par':'1 935,00 €', 'Sobretaxa DC Ímpar 15%':'2 225,25 €', 'Sobretaxa AC Ímpar 30%':'2 515,50 €', 'Sobretaxa AC Par 10%':'2 128,50 €' } },
  { id:'interior-um-oitavo', medium:'print', subtype:'interior', name:'1/8 Página', art:'print/1-8pagina.png', summary:'2 colunas × 5 módulos.',
    grid:{ cols:2, rows:5, hot:'bottom' }, peek:'Mancha 30,2×4,78 • 10 módulos',
    specs:{ 'Mancha útil':'30,2 × 4,78 cm', 'Colunas':2, 'Módulos por coluna':5, 'Total de módulos':10,
      'Base DC Par':'1 354,50 €', 'Sobretaxa DC Ímpar 15%':'1 557,68 €', 'Sobretaxa AC Ímpar 30%':'1 760,85 €', 'Sobretaxa AC Par 10%':'1 489,95 €' } },
  { id:'interior-rodape-3mod', medium:'print', subtype:'interior', name:'Rodapé — 3 módulos', art:'print/rodape3modulos.png', summary:'Faixa com 3 módulos de altura.',
    grid:{ cols:5, rows:3, hot:'bottom' }, peek:'Mancha 25,9×4,20 • 15 módulos',
    specs:{ 'Mancha útil':'25,9 × 4,20 cm', 'Colunas':5, 'Módulos por coluna':3, 'Total de módulos':15,
      'Base DC Par':'2 325,40 €', 'Sobretaxa DC Ímpar 15%':'2 674,21 €', 'Sobretaxa AC Ímpar 30%':'3 023,02 €', 'Sobretaxa AC Par 10%':'2 557,94 €' } },
  { id:'interior-dupla-abertura', medium:'print', subtype:'interior', name:'Página Dupla (Abertura)', art:'print/paginaduplaabertura.png', summary:'Dupla página — abertura de caderno.',
    grid:{ cols:10, rows:20, hot:'all' }, peek:'Mancha 53,5×30,2 • 200 módulos',
    specs:{ 'Mancha útil':'53,5 × 30,2 cm', 'Colunas':10, 'Módulos por coluna':20, 'Total de módulos':200,
      'AC':'20 838,00 €', 'DC':'19 025,00 €', 'Dupla abertura':'30 000,00 €' } },

  { id:'interior-dupla-horizontal-baixo', medium:'print', subtype:'interior', name:'Página Dupla (Horizontal baixo)', art:'print/paginaduplabaixohorz.png', summary:'Dupla — metade inferior.',
    grid:{ cols:10, rows:10, hot:'bottom' }, peek:'Mancha 53,5×14,9 • 100 módulos',
    specs:{ 'Mancha útil':'53,5 × 14,9 cm', 'Colunas':10, 'Módulos por coluna':10, 'Total de módulos':100,
      'Base DC Par':'9 515,00 €', 'Sobretaxa DC Ímpar 15%':'10 942,25 €', 'Sobretaxa AC Ímpar 30%':'12 369,50 €', 'Sobretaxa AC Par 10%':'10 466,50 €' } },

  { id:'contracapa-rodape', medium:'print', subtype:'contracapa', name:'Contracapa — Rodapé', art:'print/rodape.png', summary:'Faixa inferior (5×2 módulos).',
    grid:{ cols:5, rows:2, hot:'bottom' }, peek:'25,9×2,7 cm • 10 módulos',
    specs:{ 'Mancha útil':'25,9 × 2,7 cm', 'Colunas':5, 'Módulos por coluna':2, 'Total de módulos':10, 'BASE':'2 000,00 €' }, pricing:{ type:'fixed', amount:2000.00 } },
  { id:'contracapa-rodatopo', medium:'print', subtype:'contracapa', name:'Contracapa — Roda-topo', art:'print/rodatopo.png', summary:'Faixa superior (5×2 módulos).',
    grid:{ cols:5, rows:2, hot:'all' }, peek:'25,9×2,7 cm • 10 módulos',
    specs:{ 'Mancha útil':'25,9 × 2,7 cm', 'Colunas':5, 'Módulos por coluna':2, 'Total de módulos':10, 'BASE':'3 000,00 €' }, pricing:{ type:'fixed', amount:3000.00 } },
  { id:'contracapa-orelha', medium:'print', subtype:'contracapa', name:'Contracapa — Orelha',  art:'print/orelha.png', summary:'Bloco lateral superior (1×3 módulos).',
    grid:{ cols:1, rows:3, hot:'right' }, peek:'4,78×4,2 cm • 3 módulos',
    specs:{ 'Mancha útil':'4,78 × 4,2 cm', 'Colunas':1, 'Módulos por coluna':3, 'Total de módulos':3, 'BASE':'1 500,00 €' }, pricing:{ type:'fixed', amount:1500.00 } },
  { id:'contracapa-pagina-inteira', medium:'print', subtype:'contracapa', name:'Contracapa — Página Inteira',  art:'print/paginainteira.png', summary:'5 colunas × 20 módulos — página completa.',
    grid:{ cols:5, rows:20, hot:'all' }, peek:'25,9×30,2 cm • 100 módulos',
    specs:{ 'Mancha útil':'25,9 × 30,2 cm', 'Colunas':5, 'Módulos por coluna':20, 'Total de módulos':100, 'BASE':'15 000,00 €' }, pricing:{ type:'fixed', amount:15000.00 } }
];

const TV = [
  {
    id: 'tv-ratecard',
    medium: 'tv',
    durations: [5,10,15,20,25,30,35,40,45,50,55,60,90,120,180],
    index: {5:0.4375,10:0.75,15:0.9375,20:1,25:1.325,30:1.59,35:2.0475,40:2.5,45:3,50:3.4,55:3.9,60:4.3,90:6.6,120:8.85,180:13.5},
    dayparts: [
      { name: 'Daytime',
        slots: [
          { time: '01:00–12:30', prices: {5:67.77,10:116.18,15:145.22,20:154.90,25:205.24,30:246.29,35:317.16,40:387.25,45:464.70,50:531.31,55:604.11,60:666.07,90:1022.34,120:1370.87,180:2091.15} },
          { time: '12:30–15:30', prices: {5:98.93,10:169.59,15:211.99,20:226.12,25:299.61,30:359.53,35:462.98,40:565.30,45:678.36,50:775.59,55:881.87,60:972.32,90:1492.39,120:2001.16,180:3052.62} },
          { time: '15:30–17:00', prices: {5:156.18,10:267.74,15:334.67,20:356.98,25:473.00,30:567.60,35:730.92,40:892.45,45:1070.94,50:1224.44,55:1392.22,60:1535.01,90:2356.07,120:3159.27,180:4819.23} },
          { time: '17:00–18:00', prices: {5:173.71,10:297.79,15:372.23,20:397.05,25:526.09,30:631.31,35:812.96,40:992.63,45:1191.15,50:1361.88,55:1548.50,60:1707.32,90:2620.53,120:3513.89,180:5360.18} },
          { time: '18:00–19:00', prices: {5:211.49,10:362.55,15:453.19,20:483.40,25:640.51,30:768.61,35:989.76,40:1208.50,45:1450.20,50:1658.06,55:1885.26,60:2078.62,90:3190.44,120:4278.09,180:6525.90} },
          { time: '19:00–20:00', prices: {5:406.23,10:696.40,15:870.50,20:928.53,25:1230.30,30:1476.36,35:1901.17,40:2321.33,45:2785.59,50:3184.86,55:3621.27,60:3992.68,90:6128.30,120:8217.49,180:12535.16} }
        ]},
      { name: 'Prime Time',
        slots: [
          { time: '20:00–21:30', prices: {5:461.15,10:790.54,15:988.17,20:1054.05,25:1396.62,30:1675.94,35:2158.17,40:2635.13,45:3162.15,50:3615.39,55:4110.80,60:4532.42,90:6956.73,120:9328.34,180:14229.68} },
          { time: '21:30–01:00', prices: {5:608.76,10:1043.59,15:1304.48,20:1391.45,25:1843.67,30:2212.41,35:2848.99,40:3478.63,45:4174.35,50:4772.67,55:5426.66,60:5983.24,90:9183.57,120:12314.33,180:18784.58} }
        ]}
    ]
  }
];

/* ============================================================
   APP SCRIPT (NO DATA ARRAYS)
   - Single sticky masthead (no mastTitle element)
   - Main tabs update only when .section-head is near top
   - Clicks scroll to .section-head with header offset
   - Spy lock prevents premature “you already arrived” stops
   ============================================================ */

// ---- Safe dataset fallbacks (empty if not defined) ----
const DATA = {
  DIGITAL : (typeof DIGITAL  !== 'undefined' && Array.isArray(DIGITAL))  ? DIGITAL  : [],
  print: (typeof print !== 'undefined' && Array.isArray(print)) ? print : [],
  TV      : (typeof TV       !== 'undefined' && Array.isArray(TV))       ? TV       : [],
  ABOLA   : (typeof ABOLA    !== 'undefined' && Array.isArray(ABOLA))    ? ABOLA    : [],
  BRANDED : (typeof BRANDED  !== 'undefined' && Array.isArray(BRANDED))  ? BRANDED  : []
};

// ---------------- State ----------------
let state = {
  medium: 'abola',
  digitalType: 'all',
  subtype: 'all',
  tvDuration: null,
  tvShowAll: false
};

// ---------------- DOM ----------------
const $masthead     = document.getElementById('masthead');
const $headerSpacer = document.getElementById('headerSpacer');
const $mainTabs     = document.getElementById('mainTabs');
const $contextTabs  = document.getElementById('contextTabs');
const $brandBtn = document.getElementById('brandBtn');

// Sections
const $secAbola    = document.getElementById('sec-abola');
const $secDigital  = document.getElementById('sec-digital');
const $secprint = document.getElementById('sec-print');
const $secTV       = document.getElementById('sec-tv');
const $secBranded  = document.getElementById('sec-branded');
const $secTerms    = document.getElementById('sec-condicoes');

// Grids / panels
const $gridAbola    = document.getElementById('gridAbola');
const $gridDigital  = document.getElementById('gridDigital');
const $gridprint = document.getElementById('gridprint');
const $gridBranded  = document.getElementById('gridBranded');
const $tvPanel      = document.getElementById('tvPanel');
const $printNote = document.getElementById('printNotice');

// Drawer (optional if present)
const $scrim          = document.getElementById('scrim');
const $drawer         = document.getElementById('drawer');
const $drawerTitle    = document.getElementById('drawerTitle');
const $drawerTags     = document.getElementById('drawerTags');
const $preview        = document.getElementById('preview');
const $specList       = document.getElementById('specList');
const $specSection    = document.getElementById('specSection');
const $closeDrawerBtn = document.getElementById('closeDrawerBtn');

const $brandBar = document.querySelector('.masthead > .brand');

const $drawerContent = document.querySelector('.drawer-content');
// ---------------- Layout helpers ----------------
function mastHeight(){ return $masthead?.getBoundingClientRect().height || 0; }


function syncHeaderSpacer(){
  const h = $masthead?.getBoundingClientRect().height || 0;
  if ($headerSpacer) $headerSpacer.style.height = h + 'px';
  document.documentElement.style.setProperty('--mastpad', (h + 8) + 'px'); 
}

function buildItemHash(item){
  if(item.medium === 'digital'){
    const sub = state.digitalType || 'all';
    return `#digital/${sub}/item/${item.id}`;
  }
  if(item.medium === 'print'){
    const sub = state.subtype || 'all';
    return `#print/${sub}/item/${item.id}`;
  }
  if(item.medium === 'branded'){
    return `#branded/item/${item.id}`;
  }
  if(item.medium === 'abola'){
    return `#abola/item/${item.id}`;
  }
  return location.hash || '#';
}



function buildprintTechBox(){
  const box = document.createElement('section');
  box.className = 'print-tech';
  box.innerHTML = `
    <h3>Especificações de Impressão</h3>
    <ul>
      <li>Formato <strong>PDF, EPS</strong> ou <strong>TIFF</strong>, <strong>300&nbsp;dpi</strong>, <strong>CMYK</strong> (quadricromia).</li>
      <li>Os textos devem ser <strong>convertidos em curvas</strong>.</li>
      <li>Para melhores resultados de impressão, os ficheiros devem ser <strong>acompanhados de provas de cor</strong>.</li>
      <li>Os textos devem ser <strong>exclusivamente a preto (100%)</strong>; as restantes cores <strong>CMY</strong> devem vir com <strong>0%</strong>.</li>
    </ul>
    <p>If the above requirements are not met, Sociedade Vicra Desportiva shall not be liable for any failure or defect in the print.</p>
    <p>Caso os pontos acima não forem respeitados a Soc. Vicra Desportiva não se responsabiliza por qualquer falha ou defeito na impressão.</p>
    <h3>SOBRETAXA</h3>
    <p>Localização obrigatória +50% · Publicidade em idioma estrangeiro +50% · Publicidade produzida pelo jornal +50%</p>
  `;
  return box;
}


function baseHashForCurrent(){
  if (state.medium === 'digital')   return `#digital/${state.digitalType}`;
  if (state.medium === 'print')     return `#print/${state.subtype}`;
  if (state.medium === 'tv')        return '#'+updateHashTV();
  if (state.medium === 'branded')   return '#branded';
  if (state.medium === 'condicoes') return '#condicoes';
  return '#abola';
}



/* Measure the natural height of the brand bar and store in a CSS var */
function measureBrand(){
  if(!$brandBar || !$masthead) return;
  const wasOpen = $masthead.classList.contains('show-brand');
  // open temporarily to measure true height
  $masthead.classList.add('show-brand');
  requestAnimationFrame(()=>{
    const h = $brandBar.scrollHeight || 0;
    $masthead.style.setProperty('--brandH', h + 'px');
    if(!wasOpen) $masthead.classList.remove('show-brand');
    syncHeaderSpacer();
  });
}

/* Toggle visibility: hidden on hero (abola), visible on other sections */
function updateBrandVisibility(){
  const sec = pickSectionByRefLine();
  const medium = sec ? SECTION_TO_MEDIUM[sec.id] : null;
  const show = !!(medium && medium !== 'abola');
  $masthead.classList.toggle('show-brand', show);
  syncHeaderSpacer();
}

window.addEventListener('load', measureBrand);
window.addEventListener('resize', measureBrand);


function getContextNav(){
  return document.querySelector('.context-pane.is-live .context-tabs');
}

function scrollToHeadById(headId){
  const head = document.getElementById(headId);
  if(!head) return;

  // Recalc mast sizes first (context tabs can change masthead height)
  syncHeaderSpacer();

  // Use the SECTION top (not the sticky head's rect) to avoid "early stop" going upwards
  const section = head.closest('.section') || head;

  // Prefer offsetTop (fast) and fall back to getBoundingClientRect if needed
  let sectionTop = 0;
  if (typeof section.offsetTop === 'number') {
    sectionTop = section.offsetTop;
  } else {
    sectionTop = window.scrollY + section.getBoundingClientRect().top;
  }

  const pad = 8;
  const y = Math.max(0, sectionTop - mastHeight() - pad);

  // Lock the spy long enough for a smooth scroll regardless of distance
  const dist = Math.abs(window.scrollY - y);
  lockSpy(Math.min(2000, Math.max(900, dist * 0.9)));

  window.scrollTo({ top: y, behavior: 'smooth' });
}


window.addEventListener('resize', syncHeaderSpacer);
if (window.ResizeObserver) new ResizeObserver(syncHeaderSpacer).observe($masthead || document.body);
syncHeaderSpacer();

function setActiveTab($tabs, value, attr='data-medium'){
  if(!$tabs) return;
  [...$tabs.querySelectorAll('button')].forEach(b=>{
    b.classList.toggle('active', b.getAttribute(attr)===value);
  });
}
function gradStyle([a,b]){ return `background:linear-gradient(135deg,${a},${b});`; }

// --- Spy lock to prevent mid-scroll interruptions ---
let spyLocked = false;
let spyUnlockTimer = null;

function lockSpy(ms = 900){
  spyLocked = true;
  clearTimeout(spyUnlockTimer);
  spyUnlockTimer = setTimeout(()=>{ spyLocked = false; }, ms);
}

function unlockSpy(){
  if (!spyLocked) return;
  spyLocked = false;
  clearTimeout(spyUnlockTimer);
  onScrollSpy(); // re-evaluate active section immediately
}

// Cancel lock on any “I’m scrolling now” signals
window.addEventListener('wheel', unlockSpy, { passive: true });
window.addEventListener('touchstart', unlockSpy, { passive: true });
window.addEventListener('touchmove', unlockSpy, { passive: true });
window.addEventListener('keydown', (e) => {
  // keys that typically scroll
  const keys = ['ArrowUp','ArrowDown','PageUp','PageDown','Home','End',' '];
  if (keys.includes(e.key)) unlockSpy();
}, { passive: true });

// ---------------- Submenu (context tabs) ----------------


function buildSubmenu(medium){
  const slot = document.querySelector('.context-slot');
  const nav  = document.getElementById('contextTabs');
  if (!slot || !nav) return;

  let options = [];
  if (medium === 'digital'){
    options = [
      { val:'all',        label:'All' },
      { val:'display',    label:'Display' },
      { val:'rich-media', label:'Rich Media' }
    ];
  } else if (medium === 'print'){
    options = [
      { val:'all',        label:'All' },
      { val:'capa',       label:'Front page' },
      { val:'interior',   label:'inside page' },
      { val:'contracapa', label:'back page' }
    ];
  }

  // show only if there are options (digital/print); otherwise hide
  slot.classList.toggle('is-open', options.length > 0);

  // if hidden, no need to render anything
  if (options.length === 0){
    nav.innerHTML = '';
    return;
  }

  // build buttons
  nav.innerHTML = '';
  for (const opt of options){
    const btn = document.createElement('button');
    btn.textContent = opt.label;
    btn.setAttribute('data-sub', opt.val);

    const active =
      (medium === 'digital' && state.digitalType === opt.val) ||
      (medium === 'print'   && state.subtype     === opt.val);
    if (active) btn.classList.add('active');

    btn.onclick = () => {
      if (medium === 'digital'){
        state.digitalType = opt.val;
        renderDigitalSection();
        history.replaceState(null, '', `#digital/${opt.val}`);
        scrollToHeadById('head-digital');
      } else {
        state.subtype = opt.val;
        renderprintSection();
        history.replaceState(null, '', `#print/${opt.val}`);
        scrollToHeadById('head-print');
      }
      // update active visual
      [...nav.querySelectorAll('button')].forEach(b =>
        b.classList.toggle('active', b === btn)
      );
    };

    nav.appendChild(btn);
  }
}



// --- Scroll lock helpers (preserve page position) ---
let __lockY = 0;
function lockPageScroll(){
  __lockY = window.scrollY || window.pageYOffset || 0;
  document.body.style.position = 'fixed';
  document.body.style.top = `-${__lockY}px`;
  document.body.style.left = '0';
  document.body.style.right = '0';
  document.body.style.width = '100%';
}
function unlockPageScroll(){
  const y = Math.abs(parseInt(document.body.style.top || '0', 10)) || 0;
  document.body.style.position = '';
  document.body.style.top = '';
  document.body.style.left = '';
  document.body.style.right = '';
  document.body.style.width = '';
  window.scrollTo(0, y);
}


// ---------------- Drawer ----------------//
 
function closeDrawer({ updateHash = true } = {}){
  // stop any preview videos
$preview?.querySelectorAll('video')?.forEach(v => { try{ v.pause(); v.currentTime = 0; }catch{} });
  $scrim?.classList.remove('show');
  $drawer?.classList.remove('show');
  document.body.classList.remove('no-scroll');

  // strip /item/... from the URL but keep you in the same section
  if (updateHash){
    history.replaceState(null, '', baseHashForCurrent()); // no jump
  }
}

// listeners (put these AFTER the function above, and AFTER $scrim / $closeDrawerBtn are defined)
$scrim?.addEventListener('click', (e) => {
  e.preventDefault();
  closeDrawer({ updateHash: true });
});

$closeDrawerBtn?.addEventListener('click', (e) => {
  e.preventDefault();
  closeDrawer({ updateHash: true });
});

window.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    closeDrawer({ updateHash: true });
  }
});




function openDrawer(item, { fromHash = false } = {}){
  if (!item || item.medium === 'tv' || !$drawer) return;

  // Title + tags
  if ($drawerTitle) $drawerTitle.textContent = item.name || 'Details';
  if ($drawerTags)  $drawerTags.textContent  = [item.subtype, item.medium].filter(Boolean).join(' · ');

  // Preview
if ($preview){
  $preview.innerHTML = '';

  const box = document.createElement('div');
  box.className = 'media-box ' + (item.medium === 'print' ? 'is-print' : 'is-digital');

  if (item.medium === 'print' && item.video){           // MP4 takes priority on print
    const v = document.createElement('video');
    v.src = item.video;
    v.autoplay = true;
    v.muted = true;
    v.loop = true;
    v.playsInline = true;
    v.controls = true;            // keep or remove, your call
    v.preload = 'metadata';
    box.appendChild(v);

  } else if (item.art){                                   // PNG
    const img = document.createElement('img');
    img.src = item.art;
    img.alt = item.name || '';
    img.loading = 'lazy';
    box.appendChild(img);

  } else {                                                // gradient fallback
    box.style.background = item.gradient
      ? `linear-gradient(135deg, ${item.gradient[0]}, ${item.gradient[1]})`
      : 'linear-gradient(135deg,#eee,#fff)';
  }

  $preview.appendChild(box);
}

  // Specs
  if ($specList){
    $specList.innerHTML = '';
    const specs = item.specs || { Note:'Specs coming soon' };
    Object.entries(specs).forEach(([k,v])=>{
      const dt=document.createElement('dt'); dt.textContent=k;
      const dd=document.createElement('dd'); dd.textContent=String(v);
      $specList.append(dt,dd);
    });
  }
  if ($specSection) $specSection.style.display='block';

  // If it's a print item, append the "print-tech" info INSIDE the drawer (bottom)
  const drawerContent = document.querySelector('.drawer-content');
  if (drawerContent){
    // remove previous block if any
    const old = drawerContent.querySelector('.print-tech-inside');
    if (old) old.remove();

    if (item.medium === 'print'){
      const box = document.createElement('section');
      box.className = 'print-tech print-tech-inside';
      box.innerHTML = `
        <h3>Especificações de Impressão</h3>
        <ul>
          <li>Formato <strong>PDF, EPS</strong> ou <strong>TIFF</strong>, <strong>300&nbsp;dpi</strong>, <strong>CMYK</strong> (quadricromia).</li>
          <li>Os textos devem ser <strong>convertidos em curvas</strong>.</li>
          <li>Para melhores resultados de impressão, os ficheiros devem ser <strong>acompanhados de provas de cor</strong>.</li>
          <li>Os textos devem ser <strong>exclusivamente a preto (100%)</strong>; as restantes cores <strong>CMY</strong> devem vir com <strong>0%</strong>.</li>
        </ul>
        <p>If the above requirements are not met, Sociedade Vicra Desportiva shall not be liable for any failure or defect in the print.</p>
        <p>Caso os pontos acima não forem respeitados a Soc. Vicra Desportiva não se responsabiliza por qualquer falha ou defeito na impressão.</p>
        <h3>SOBRETAXA</h3>
        <p>Localização obrigatória +50% · Publicidade em idioma estrangeiro +50% · Publicidade produzida pelo jornal +50%</p>
      `;
      drawerContent.appendChild(box);
    }
  }

  // Show drawer (and lock page scroll)
  $scrim?.classList.add('show');
  $drawer?.classList.add('show');
  document.body.classList.add('no-scroll');

  // Make the URL shareable for this item WITHOUT triggering hashchange/scroll
  if (!fromHash){
    let hash = baseHashForCurrent();
    if (item.medium === 'digital')   hash = `#digital/${state.digitalType}/item/${item.id}`;
    else if (item.medium === 'print') hash = `#print/${state.subtype}/item/${item.id}`;
    else if (item.medium === 'branded') hash = `#branded/item/${item.id}`;
    history.replaceState(null, '', hash); // no jump
  }
}


function labelForItem(item){
  const sub = item.subtype || '';
  const nice = {
    'display': 'Display',
    'rich-media': 'Rich Media',
    'capa': 'Front page',
    'interior': 'Inside pages',
    'contracapa': 'Back pages'
  };
  return nice[sub] || '';
}


function posterBG(item){
  if (item.art) {
    return `background: center / cover no-repeat url("${item.art}")`;
  }
  const g = item.gradient || ['#e5e7eb','#ffffff'];
  return `background: linear-gradient(135deg, ${g[0]}, ${g[1]})`;
}

// ---------------- Builders ----------------

function buildPoster(item){
  const card   = document.createElement('article'); card.className='card';
  card.dataset.medium = item.medium || ''; 
  const poster = document.createElement('div'); poster.className='poster';
  const grad   = document.createElement('div'); grad.className='grad';
  grad.style.cssText = posterBG(item);
  poster.appendChild(grad);

  // static, per-item label
  const badge = labelForItem(item);
  if (badge){
    const lbl = document.createElement('div');
    lbl.className = 'label';
    lbl.textContent = badge;
    poster.appendChild(lbl);
  }

  const meta   = document.createElement('div'); meta.className='meta';
  const title  = document.createElement('div'); title.className='title';
  title.innerHTML = `<span>${item.name||''}</span>`;
  const summary = document.createElement('div'); summary.className='muted'; summary.style.fontSize='13px';
  summary.textContent = item.summary || '';
  meta.append(title, summary);
  card.append(poster, meta);

  card.addEventListener('click', ()=> openDrawer(item));
  return card;
}

// ---------------- Datasets ----------------
function datasetAbola(){   return DATA.ABOLA; }
function datasetDigital(){ return state.digitalType==='all' ? DATA.DIGITAL : DATA.DIGITAL.filter(i=>i.subtype===state.digitalType); }
function datasetprint(){return state.subtype==='all'? DATA.print: DATA.print.filter(i=>i.subtype===state.subtype); }
function datasetBranded(){ return DATA.BRANDED; }

// ---------------- Renderers ----------------
function renderAbolaSection(){
  if(!$gridAbola) return;
  $gridAbola.innerHTML='';
  datasetAbola().forEach(item=> $gridAbola.appendChild(buildPoster(item)));
}
function renderDigitalSection(){
  if(!$gridDigital) return;
  $gridDigital.innerHTML='';
  datasetDigital().forEach(item=> $gridDigital.appendChild(buildPoster(item)));
}
function renderprintSection(){
  if(!$gridprint || !$secprint) return;

  // populate grid
  $gridprint.innerHTML='';
  datasetprint().forEach(item=> $gridprint.appendChild(buildPoster(item)));

  // hide old "print-note" banner (we’re moving it to the bottom)
  if($printNote){
    $printNote.style.display='none';
    $printNote.textContent='';
  }

  // remove any previous foot blocks to avoid duplicates on re-render
  [...$secprint.querySelectorAll('.print-tech')].forEach(n=> n.remove());

  // build the bottom box (Ficheiros + Sobretaxa)
  const box = document.createElement('section');
  box.className = 'print-tech';
  box.innerHTML = `
    <h3>Especificações de Impressão</h3>
    <ul>
      <li>Formato <strong>PDF, EPS</strong> ou <strong>TIFF</strong>, <strong>300&nbsp;dpi</strong>, <strong>CMYK</strong> (quadricromia).</li>
      <li>Os textos devem ser <strong>convertidos em curvas</strong>.</li>
      <li>Para melhores resultados de impressão, os ficheiros devem ser <strong>acompanhados de provas de cor</strong>.</li>
      <li>Os textos devem ser <strong>exclusivamente a preto (100%)</strong>; as restantes cores <strong>CMY</strong> devem vir com <strong>0%</strong>.</li>
    </ul>

    <p>If the above requirements are not met, Sociedade Vicra Desportiva shall not be liable for any failure or defect in the print.</p>
    <p>Caso os pontos acima não forem respeitados a Soc. Vicra Desportiva não se responsabiliza por qualquer falha ou defeito na impressão.</p>

    <h3>SOBRETAXA</h3>
    <p>Localização obrigatória +50% · Publicidade em idioma estrangeiro +50% · Publicidade produzida pelo jornal +50%</p>
  `;
  $secprint.appendChild(box);
}

function renderBrandedSection(){
  if(!$gridBranded) return;
  $gridBranded.innerHTML='';
  datasetBranded().forEach(item=> $gridBranded.appendChild(buildPoster(item)));
}

// ---- TV Ratecard ----
function updateHashTV(){
  let hash = 'tv';
  if (Number.isFinite(state.tvDuration)) hash += '/' + state.tvDuration;
  if (state.tvShowAll) hash += '/all';
  return hash;
}

function renderTVMatrix(item, targetEl){
  const durations = item.durations;
  const scroller = document.createElement('div'); scroller.className = 'hscroll';
  const table = document.createElement('table'); table.className = 'rate-table';

  // keep references to every cell per duration (for hover/active toggles)
  const cellsByDur = Object.fromEntries(durations.map(d => [d, []]));

  function setHover(dur, on){
    (cellsByDur[dur] || []).forEach(el => el.classList.toggle('col-hover', on));
  }
  function setActive(dur){
    // clear previous
    Object.values(cellsByDur).flat().forEach(el => el.classList.remove('col-active'));
    // set new
    (cellsByDur[dur] || []).forEach(el => el.classList.add('col-active'));
  }
  function selectDuration(dur){
    state.tvDuration = dur;
    setActive(dur);
    history.replaceState(null, '', '#'+updateHashTV());
    scrollToHeadById('head-tv');
  }

  // THEAD
  const thead = document.createElement('thead');
  const htr = document.createElement('tr');

  const thTime = document.createElement('th');
  thTime.textContent = 'Time';
  thTime.className = 'sticky-col';
  htr.appendChild(thTime);

  durations.forEach(d => {
    const th = document.createElement('th');
    th.textContent = `${d}”`;
    th.classList.add('dur');
    th.dataset.dur = d;
    th.addEventListener('mouseenter', () => setHover(d, true));
    th.addEventListener('mouseleave', () => setHover(d, false));
    th.addEventListener('click', () => selectDuration(d));
    cellsByDur[d].push(th);
    htr.appendChild(th);
  });

  thead.appendChild(htr);
  table.appendChild(thead);

  // TBODY
  const tbody = document.createElement('tbody');

  (item.dayparts || []).forEach(dp => {
    const sec = document.createElement('tr'); sec.className = 'section-row';
    const s1 = document.createElement('th'); s1.className = 'sticky-col'; s1.textContent = dp.name || '';
    const s2 = document.createElement('th'); s2.colSpan = durations.length;
    sec.append(s1, s2);
    tbody.appendChild(sec);

    (dp.slots || []).forEach(row => {
      const tr = document.createElement('tr');

      const tdTime = document.createElement('td');
      tdTime.className = 'sticky-col';
      tdTime.textContent = row.time || '';
      tr.appendChild(tdTime);

      durations.forEach(d => {
        const td = document.createElement('td');
        td.dataset.dur = d;
        const val = row.prices?.[d];
        td.textContent = (val != null) ? ('€ ' + val.toLocaleString('pt-PT')) : '—';

        td.addEventListener('mouseenter', () => setHover(d, true));
        td.addEventListener('mouseleave', () => setHover(d, false));
        td.addEventListener('click',      () => selectDuration(d));

        cellsByDur[d].push(td);
        tr.appendChild(td);
      });

      tbody.appendChild(tr);
    });
  });

  // INDEX section
  const idxHead = document.createElement('tr'); idxHead.className = 'section-row';
  const ih1 = document.createElement('th'); ih1.className = 'sticky-col'; ih1.textContent = 'INDEX';
  const ih2 = document.createElement('th'); ih2.colSpan = durations.length;
  idxHead.append(ih1, ih2);
  tbody.appendChild(idxHead);

  const idxRow = document.createElement('tr');
  const il = document.createElement('td'); il.className = 'sticky-col'; il.textContent = '';
  idxRow.appendChild(il);

  durations.forEach(d => {
    const td = document.createElement('td');
    td.dataset.dur = d;
    td.textContent = (item.index?.[d] ?? '—');

    td.addEventListener('mouseenter', () => setHover(d, true));
    td.addEventListener('mouseleave', () => setHover(d, false));
    td.addEventListener('click',      () => selectDuration(d));

    cellsByDur[d].push(td);
    idxRow.appendChild(td);
  });

  tbody.appendChild(idxRow);
  table.appendChild(tbody);
  scroller.appendChild(table);
  targetEl.appendChild(scroller);

  // mark current duration
if (Number.isFinite(state.tvDuration)) setActive(state.tvDuration);

}



function renderTVTechNote(targetEl){
  const box = document.createElement('section');
  box.className = 'tv-tech';
  box.innerHTML = `
    <h3>Broadcast Technical Specifications</h3>
    <dl>
      <dt>File Type</dt><dd>MXF (.mxf)</dd>
      <dt>Codec</dt><dd>MPEG Video — XCam HD 35 — Version 2</dd>
      <dt>Bit rate</dt><dd>35 Mb/s</dd>
      <dt>Resolution</dt><dd>1920×1080 — 16:9</dd>
      <dt>Frame rate</dt><dd>25.000 FPS</dd>
      <dt>Bit depth</dt><dd>8 bits</dd>
      <dt>Scan type</dt><dd>Interlaced</dd>
      <dt>Scan order</dt><dd>Top Field Order</dd>
      <dt>Compression mode</dt><dd>Lossy</dd>
    </dl>
    <p>If the above requirements are not met, Sociedade Vicra Desportiva shall not be liable for any failure or defect in the broadcast.</p>
    <p>Caso os pontos acima não forem respeitados a Soc. Vicra Desportiva não se responsabiliza por qualquer falha ou defeito na emissão.</p>
  `;
  targetEl.appendChild(box);
}



function renderTVOutside(item){
  if(!$tvPanel || !item) return;
  $tvPanel.innerHTML = '';
  renderTVMatrix(item, $tvPanel);
  renderTVTechNote($tvPanel); 
}

// Render all initially
function renderAll(){
  renderAbolaSection();
  renderDigitalSection();
  renderprintSection();
  renderBrandedSection();
  if (DATA.TV[0]) renderTVOutside(DATA.TV[0]);
}
renderAll();


$brandBtn?.addEventListener('click', () => {
  state.medium = 'top';
  setActiveTab($mainTabs, null);     // clear highlight from main tabs
  buildSubmenu('top');             // no submenu
  lockSpy(900);
  scrollToHeadById('head-abola');
  history.replaceState(null, '', '#top');
});


// ---------------- Main tabs ----------------
$mainTabs?.addEventListener('click', (e)=>{
  const btn = e.target.closest('button'); if(!btn) return;
  const medium = btn.dataset.medium; if(!medium) return;

  state.medium = medium;
  setActiveTab($mainTabs, medium);
  buildSubmenu(medium);

const headMap = {
  digital:'head-digital',
  print:'head-print',
  tv:'head-tv',
  branded:'head-branded',
  condicoes:'head-condicoes'
};

  scrollToHeadById(headMap[medium]);

  if(medium==='digital')        history.replaceState(null,'',`#digital/${state.digitalType}`);
  else if(medium==='print')  history.replaceState(null,'',`#print/${state.subtype}`);
  else if (medium==='tv') history.replaceState(null,'', '#'+updateHashTV());
  else                          history.replaceState(null,'',`#${medium}`);
});// ---------------- Scroll spy (reference-line method; no flicker) ----------------
const SECTION_TO_MEDIUM = {
  'sec-abola':'abola',
  'sec-digital':'digital',
  'sec-print':'print',
  'sec-tv':'tv',
  'sec-branded':'branded',
  'sec-condicoes':'condicoes'
};

const SECTIONS = Array.from(document.querySelectorAll('.section'));
const COOLDOWN_MS = 200;     // tiny cooldown after we switch, to avoid double flips
const REF_EXTRA   = 12;      // pixels below the masthead we place the reference line

let spyCooldown = false;
function cool(ms = COOLDOWN_MS){
  spyCooldown = true;
  setTimeout(()=> spyCooldown = false, ms);
}

function pickSectionByRefLine(){
  // line sits just below the sticky masthead
  const refY = (mastHeight() || 0) + REF_EXTRA;

  // find the section whose body contains that line
  let hit = null;
  for(const sec of SECTIONS){
    const r = sec.getBoundingClientRect();
    // visible band below the masthead
    if (r.top <= refY && r.bottom > refY){
      hit = sec;
      break;
    }
  }

  // fallback: closest top to the ref line (in case at extremes)
  if(!hit){
    let best = null;
    for(const sec of SECTIONS){
      const d = Math.abs(sec.getBoundingClientRect().top - refY);
      if(!best || d < best.d) best = { sec, d };
    }
    hit = best?.sec || null;
  }
  return hit;
}

let ticking = false;
function onScrollSpy(){

  if (spyLocked || spyCooldown || ticking) return;  // don’t fight programmatic scrolls
  ticking = true;
  requestAnimationFrame(()=>{
    ticking = false;
    const sec = pickSectionByRefLine();
    updateBrandVisibility();
    if(!sec) return;

    const medium = SECTION_TO_MEDIUM[sec.id];

     if ((state.medium === 'top' || location.hash.startsWith('#top')) && medium === 'abola') {
      return; // keep #top intact
    }

    
if (medium && state.medium !== medium){
  state.medium = medium;

  if (medium === 'condicoes'){
    // clear highlight + close the context slot
    setActiveTab($mainTabs, null);          // no main tab selected
    buildSubmenu('condicoes');              // hides the context slot
    history.replaceState(null,'','#condicoes');
  } else {
    setActiveTab($mainTabs, medium);
    buildSubmenu(medium);

    if (medium === 'digital')
      history.replaceState(null,'',`#digital/${state.digitalType}`);
    else if (medium === 'print')
      history.replaceState(null,'',`#print/${state.subtype}`);
else if (medium === 'tv') history.replaceState(null,'', '#'+updateHashTV());
    else
      history.replaceState(null,'',`#${medium}`);
  }

  cool();
}

  });
}

window.addEventListener('scroll', onScrollSpy, { passive:true });
window.addEventListener('resize', onScrollSpy);
onScrollSpy(); // init once





// ---------------- Deep link handling ----------------
function handleHash(){
  const raw = (location.hash || '').replace('#','').trim();
  if (!raw){
    // default landing: hero (A BOLA)
    state.medium = 'abola';
    setActiveTab($mainTabs, null);
    buildSubmenu('abola'); // closes the context slot
    return;
  }

  const parts = raw.split('/').filter(Boolean);
  const first = parts[0];

  // ===== TV =====
  if (first === 'tv'){
    state.medium = 'tv';
    setActiveTab($mainTabs, 'tv');
    buildSubmenu('tv'); // no submenu options for tv

    // Accept #tv/30 or #tv/30/all or #tv/all
    const dur = parseInt(parts[2] || parts[1], 10);
    if (!isNaN(dur)) state.tvDuration = dur;
    state.tvShowAll = parts.includes('all');

    if (DATA.TV[0]) renderTVOutside(DATA.TV[0]);

    // bring the section under the masthead; do NOT jump the page elsewhere
    lockSpy(900);
    scrollToHeadById('head-tv');
    return;
  }

  // ===== DIGITAL =====
  if (first === 'digital'){
    state.medium = 'digital';

    // subtype (all | display | rich-media)
    const sub = parts[1];
    if (['all','display','rich-media'].includes(sub)) state.digitalType = sub;

    setActiveTab($mainTabs, 'digital');
    buildSubmenu('digital');
    setActiveTab(getContextNav(), state.digitalType, 'data-sub');
    renderDigitalSection();

    // Deep-link drawer: #digital/<sub>/item/<id>
    if (parts[2] === 'item' && parts[3]){
      const id = parts[3];
      const item = DATA.DIGITAL.find(i => i.id === id);
      lockSpy(900);
      scrollToHeadById('head-digital');
      if (item) setTimeout(() => openDrawer(item), 0);
    } else {
      lockSpy(900);
      scrollToHeadById('head-digital');
    }
    return;
  }

  // ===== print =====
  if (first === 'print'){
    state.medium = 'print';

    // subtype (all | capa | interior | contracapa)
    const sub = parts[1];
    if (['all','capa','interior','contracapa'].includes(sub)) state.subtype = sub;

    setActiveTab($mainTabs, 'print');
    buildSubmenu('print');
    setActiveTab(getContextNav(), state.subtype, 'data-sub');
    renderprintSection();

    // Deep-link drawer: #print/<sub>/item/<id>
    if (parts[2] === 'item' && parts[3]){
      const id = parts[3];
      const item = DATA.print.find(i => i.id === id);
      lockSpy(900);
      scrollToHeadById('head-print');
      if (item) setTimeout(() => openDrawer(item), 0);
    } else {
      lockSpy(900);
      scrollToHeadById('head-print');
    }
    return;
  }

  // ===== BRANDED =====
  if (first === 'branded'){
    state.medium = 'branded';
    setActiveTab($mainTabs, 'branded');
    buildSubmenu('branded'); // no submenu
    renderBrandedSection();

    // Deep-link drawer: #branded/item/<id>
    if (parts[1] === 'item' && parts[2]){
      const id = parts[2];
      const item = DATA.BRANDED?.find?.(i => i.id === id);
      lockSpy(900);
      scrollToHeadById('head-branded');
      if (item) setTimeout(() => openDrawer(item), 0);
    } else {
      lockSpy(900);
      scrollToHeadById('head-branded');
    }
    return;
  }

  // ===== TOP / ABOLA / CONDICOES =====
  if (first === 'top'){
    state.medium = 'top';
    setActiveTab($mainTabs, null);
    buildSubmenu('top'); // closes the context slot
    lockSpy(900);
    scrollToHeadById('head-abola');
    return;
  }

  if (first === 'abola'){
    state.medium = 'abola';
    setActiveTab($mainTabs, null);
    buildSubmenu('abola');

    // Optional deep-link drawer for hero items: #abola/item/<id>
    if (parts[1] === 'item' && parts[2]){
      const id = parts[2];
      const item = DATA.ABOLA?.find?.(i => i.id === id);
      lockSpy(900);
      scrollToHeadById('head-abola');
      if (item) setTimeout(() => openDrawer(item), 0);
    } else {
      lockSpy(900);
      scrollToHeadById('head-abola');
    }
    return;
  }

  if (first === 'condicoes'){
    state.medium = 'condicoes';
    setActiveTab($mainTabs, null);
    buildSubmenu('condicoes'); // closes the context slot
    lockSpy(900);
    scrollToHeadById('head-condicoes');
    return;
  }

  // ===== Fallback =====
  buildSubmenu(state.medium);
}

window.addEventListener('hashchange', handleHash);
handleHash();

// ---------------- Responsive TV re-render ----------------
const mqMobile = window.matchMedia('(max-width: 640px)');
mqMobile.addEventListener?.('change', ()=>{ 
  if (state.medium==='tv' && DATA.TV[0]) renderTVOutside(DATA.TV[0]); 
});



(function initHeroMetricsRotator(){
  const ROTATE_MS = 5000; // change interval if you like

  const heroInner = document.querySelector('#head-abola .hero-inner');
  if(!heroInner) return;

  const slides = Array.from(heroInner.querySelectorAll('.hero-metrics'));
  if(slides.length <= 1) return;

  // stage
  const stage = document.createElement('div');
  stage.className = 'metrics-rotator';
  heroInner.insertBefore(stage, slides[0]);

  // move & measure
  let maxH = 0;
  slides.forEach(s => { stage.appendChild(s); maxH = Math.max(maxH, s.offsetHeight || 0); });
  stage.style.setProperty('--rot-h', maxH + 'px');

  // slide setup
  slides.forEach(s => { s.classList.add('metrics-slide'); s.setAttribute('aria-hidden','true'); });

  // nav UI
  const nav = document.createElement('div');
  nav.className = 'hero-metrics-nav';
  const mkBtn = (dir, label, svg) => {
    const b = document.createElement('button');
    b.type = 'button';
    b.className = `nav-btn ${dir}`;
    b.setAttribute('aria-label', label);
    b.innerHTML = svg;
    return b;
  };
  const prevBtn = mkBtn(
    'prev','Anterior',
    `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15 5 L8 12 L15 19" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`
  );
  const nextBtn = mkBtn(
    'next','Seguinte',
    `<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M9 5 L16 12 L9 19" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`
  );
  nav.append(prevBtn, nextBtn);
  stage.appendChild(nav);

  // logic
  let idx = 0;
  let timer = null;
  let userStopped = false; // becomes true when user clicks or uses keyboard

  function show(i){
    slides[idx].classList.remove('is-active');
    slides[idx].setAttribute('aria-hidden','true');
    idx = (i + slides.length) % slides.length;
    slides[idx].classList.add('is-active');
    slides[idx].setAttribute('aria-hidden','false');
  }

  function start(){ if(!userStopped){ stop(); timer = setInterval(()=> show(idx + 1), ROTATE_MS); } }
  function stop(){ if(timer){ clearInterval(timer); timer = null; } }

  // first slide
  show(0);

  // manual controls — stop auto on first interaction
  function manualNext(){ userStopped = true; stop(); show(idx + 1); }
  function manualPrev(){ userStopped = true; stop(); show(idx - 1); }

  prevBtn.addEventListener('click', manualPrev);
  nextBtn.addEventListener('click', manualNext);

  // keyboard: focusable stage
  stage.tabIndex = 0;
  stage.addEventListener('keydown', (e)=>{
    if(e.key === 'ArrowRight'){ manualNext(); }
    else if(e.key === 'ArrowLeft'){ manualPrev(); }
  });

  // pause on hover; resume only if user never interacted
  stage.addEventListener('mouseenter', stop);
  stage.addEventListener('mouseleave', ()=> { if(!userStopped) start(); });

  // only rotate while visible; don't restart if user stopped it
  const io = new IntersectionObserver(([entry])=>{
    if(entry && entry.isIntersecting && !userStopped) start(); else stop();
  }, { threshold: 0.2 });
  io.observe(stage);

  // recalc reserved height if layout changes
  function recalcHeight(){
    slides.forEach(s => s.classList.remove('metrics-slide'));  // flow to measure
    const newH = Math.max(...slides.map(s => s.offsetHeight || 0));
    stage.style.setProperty('--rot-h', (newH || maxH) + 'px');
    slides.forEach(s => s.classList.add('metrics-slide'));
  }
  let rAF;
  window.addEventListener('resize', () => { cancelAnimationFrame(rAF); rAF = requestAnimationFrame(recalcHeight); });
  if (document.fonts && document.fonts.ready) document.fonts.ready.then(recalcHeight).catch(()=>{});
  setTimeout(recalcHeight, 1200);
})();
</script>


</body>
</html>