<div class="ad horz"></div>
<div class="ad vert"></div>
<div class="ad horz"></div>

<p style="height:8000px; position:relative;"></p>

<script>
        let adsKeywords = {
    "pageType": [
        "article",
        "summary"
    ],
    "interests": [
        "Futebol",
        "maritimo-lusitania-de-lourosa-8047873",
        "Marítimo",
        "Lusitânia de Lourosa",
        "Liga Portugal 2 Meu Super "
    ],
    "id": 8047873
} 
</script>

<!-- OneTrust Cookies Consent Notice start for abola.pt  -->
<script src="https://cdn.cookielaw.org/consent/65b60f59-7417-4967-865d-889d81e1122b-test/otSDKStub.js" data-language="pt" type="text/javascript" charset="UTF-8" data-domain-script="65b60f59-7417-4967-865d-889d81e1122b-test" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
 <!-- OneTrust Cookies Consent Notice end for abola.pt -->


 


<!-- <script type="text/javascript" class="optanon-category-C0004" src="https://securepubads.g.doubleclick.net/tag/js/gpt.js" async="true"></script> -->
<!--
<script
    src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"
    crossorigin="anonymous"
    async
></script>

    <script async src="https://pagead2.googlesyndication.com/tag/js/gpt.js"></script>
    <script>
-->

<!-- <script type="text/javascript"  async src="https://cdn-a.yieldlove.com/v2/yieldlove.js?abola.pt"></script> -->



<!-- REMOVE any static <script src="https://cdn-a.yieldlove.com/v2/yieldlove.js?..."> from the HTML -->


  <script>
/* ============================
   ONE-TIME INIT GUARD
   ============================ */
if (window.__adsInitOnce) { console.debug('[ADS] init skipped'); }
else {
window.__adsInitOnce = true;

/* ============================
   EARLY GLOBALS (before any YL load)
   ============================ */
window.yieldlove_prevent_autostart = true;     // must exist before yieldlove.js executes
window.yieldlove_cmd = window.yieldlove_cmd || [];
window.googletag = window.googletag || { cmd: [] };

document.addEventListener('DOMContentLoaded', function () {
  /* ============================
     CONFIG / STATE
     ============================ */
  const pub = window.pub = window.pub || {};
  const TARGETING_CAT_ID = 'C0004'; // OneTrust: Ads/Targeting

  // one-shot / boot guards
  pub.booting   = false;
  pub.adsReady  = false;
  pub.gptBuild  = null;    // 'la' or 'std'

  // slots & layout state
  pub.slotQueue = [];
  pub.adSlots   = {};
  pub.oopSlot   = null;
  pub.dbTimeout = null;

  pub.BP       = [0, 640, 768, 1025, 1260];
  pub.BPLabels = ['mobile','phablet','tablet','smalldesktop','widedesktop'];
  pub.dbDelay  = 555;
  pub.currentBP = pubBreakPoint(window.innerWidth);
  pub.fetchDistance  = Math.max(500, Math.floor(window.innerHeight * 0.80));
  pub.footerDistance = Math.max(350, Math.floor(window.innerHeight * 0.65));
  pub.setfooterstickyStorageCap = 'adfooterstickyCap';
  pub.footerstickyTimer = 10 * 60 * 1000;
  pub.footerstickyWL = {'3483087791': true, '3556005506': true, '3558075999': true};
  pub.fEnd = [encodeURI(window.location.href.match(/([^\?]*)\/*$/)[0])];
  pub.KV = {};
  pub.exclusiveContent = ['noticia-patrocinada','livescore','mercado','matchhub'];

  pub.slotDimensions = {
    horz: [
      [1260,220],[1150,250],[970,250],[970,90],[728,90],[640,100],
      [468,60],[460,60],[320,100],[320,160],[300,120],[320,50],
      [300,100],[300,75],[300,50],[1,1]
    ],
    vert: [
      [300,600],[300,250],[336,600],[336,320],[336,280],[160,600],[120,600],
      [250,250],[200,200],[320,100],[320,160],[300,120],[320,50],
      [300,100],[300,75],[300,50],[1,1],'fluid'
    ],
    inline: [
      [300,250],[336,320],[336,280],[250,250],[200,200],[640,100],
      [468,60],[460,60],[320,100],[320,160],[300,120],[320,50],
      [300,100],[300,75],[300,50],[1,1],'fluid'
    ],
    footersticky: [
      [970,90],[728,90],[640,100],[468,60],[460,60],[360,100],[360,50],
      [320,160],[300,120],[320,100],[320,50],[300,100],[300,75],[300,50],[1,1]
    ],
    mrec: [
      [300,250],[320,100],[250,250],[200,200],[1,1],'fluid'
    ]
  };

  // ensure #oop anchor exists (harmless before consent)
  if (!document.getElementById('oop')) {
    const oopEl = document.createElement('div');
    oopEl.id = 'oop'; oopEl.className = 'ad oop';
    oopEl.style.cssText = 'position:fixed;left:0;top:0;z-index:2147483645;width:1px;height:1px;';
    document.body.prepend(oopEl);
  }

  /* ============================
     HELPERS
     ============================ */
  function pubBreakPoint(w){ for (let i=pub.BP.length-1;i>=0;i--) if (w>=pub.BP[i]) return i; return 0; }
  function pubBreakPointLabel(w){ return pub.BPLabels[pubBreakPoint(w)]; }

  function getSlotName(el){
    const valid = ['horz','vert','inline','footersticky','mrec'];
    for (const s of valid) if (el.classList.contains(s)) return s;
    return null;
  }
  function pubDisplay(el){
    while (el) { if (getComputedStyle(el).display==='none') return false; el = el.parentElement; }
    return true;
  }

  function formatKeyword(val){
    if (val==null) return null;
    const s = String(val).normalize('NFD').replace(/[\u0300-\u036f]/g,'')
      .toLowerCase().replace(/[^a-z0-9_-]+/g,'-').replace(/-{2,}/g,'-').replace(/^-+|-+$/g,'');
    return s ? s.slice(0,40) : null;
  }

  // ingest optional adsKeywords
  const srcKV = (typeof adsKeywords !== 'undefined' && adsKeywords && typeof adsKeywords==='object') ? adsKeywords : null;
  if (srcKV){
    Object.entries(srcKV).forEach(([key,val])=>{
      if (key==='id'){ const idVal = Array.isArray(val)?val[0]:val; if (idVal!=null) pub.KV.id = String(idVal); return; }
      if (Array.isArray(val)){ const cleaned = val.map(formatKeyword).filter(Boolean); if (cleaned.length) pub.KV[key]=cleaned; }
      else { const cleaned = formatKeyword(val); if (cleaned) pub.KV[key]=[cleaned]; }
    });
  }

  function isAdCategoryForbidden(pubObj){
    const toArray = v => (Array.isArray(v)?v:[v]).filter(Boolean);
    const norm = arr => toArray(arr).map(formatKeyword).filter(Boolean);
    const interests = norm(pubObj.KV.interests);
    const pageTypes = norm(pubObj.KV.pageType);
    const forbidden = pubObj.exclusiveContent.map(formatKeyword).filter(Boolean);
    return interests.some(c=>forbidden.includes(c)) || pageTypes.some(c=>forbidden.includes(c));
  }

  function pubSlotAttr(){
    const validSlots = ['horz','vert','inline','footersticky','mrec'];
    pub.slotPos = {horz:0,vert:0,inline:0,footersticky:0,mrec:0};
    Array.from(document.getElementsByClassName('ad')).forEach(el=>{
      let slotType = getSlotName(el) || el.dataset.slotType;
      if (!slotType) return;
      el.dataset.slotType = slotType;
      if (el.dataset.pos && isNaN(parseInt(el.dataset.pos,10))) return;
      if (pubDisplay(el) && (!el.dataset.pos || isNaN(parseInt(el.dataset.pos,10)))){
        pub.slotPos[slotType] = (pub.slotPos[slotType]||0) + 1;
        el.dataset.pos = pub.slotPos[slotType];
      }
      if (!el.id) el.id = slotType + el.dataset.pos;
    });
  }

  function buildSizeMapping(el, slotName){
    if (slotName==='vert'){
      return googletag.sizeMapping()
        .addSize([pub.BP[3],0], [[300,600],[300,250],[250,250],[200,200],[160,600],[120,600],[1,1]])
        .addSize([pub.BP[2],0], [[300,600],[300,250],[250,250],[200,200],[1,1]])
        .addSize([pub.BP[0],0], [[300,600],[300,250],[336,320],[336,280],[336,600],[250,250],[200,200],[320,100],[320,160],[300,120],[320,50],[300,100],[300,75],[300,50],[1,1],'fluid'])
        .build();
    }
    if (slotName==='horz'){
      return googletag.sizeMapping()
        .addSize([pub.BP[4],0], [[1260,220],[1150,250],[970,250],[1,1]])
        .addSize([pub.BP[3],0], [[970,250],[1,1]])
        .addSize([pub.BP[2],0], [[728,90],[1,1]])
        .addSize([pub.BP[1],0], [[468,60],[460,60],[320,100],[320,160],[300,120],[320,50],[300,100],[300,75],[300,50],[1,1]])
        .addSize([pub.BP[0],0], [[320,100],[320,160],[300,120],[320,50],[300,100],[300,75],[300,50],[1,1]])
        .build();
    }
    if (slotName==='inline'){
      return googletag.sizeMapping()
        .addSize([pub.BP[2],0], [[640,100],[300,250],[468,60],[460,60],[250,250],[200,200],[1,1],'fluid'])
        .addSize([pub.BP[1],0], [[468,60],[460,60],[320,160],[320,100],[320,50],[300,250],[300,120],[300,100],[300,75],[300,50],[250,250],[200,200],[1,1],'fluid'])
        .addSize([pub.BP[0],0], [[336,320],[336,280],[320,160],[320,100],[320,50],[300,250],[300,120],[300,100],[300,75],[300,50],[250,250],[200,200],[1,1],'fluid'])
        .build();
    }
    if (slotName==='footersticky'){
      return googletag.sizeMapping()
        .addSize([pub.BP[3],0], [[970,90],[728,90],[640,100],[1,1]])
        .addSize([pub.BP[2],0], [[728,90],[468,60],[640,100],[1,1]])
        .addSize([pub.BP[1],0], [[468,60],[460,60],[360,100],[360,50],[320,100],[320,160],[300,120],[320,50],[300,100],[300,75],[300,50],[1,1]])
        .addSize([pub.BP[0],0], [[320,100],[320,160],[300,120],[320,50],[300,100],[300,75],[300,50],[1,1]])
        .build();
    }
    if (slotName==='mrec'){
      return googletag.sizeMapping()
        .addSize([pub.BP[2],0], [[300,250],[250,250],[200,200],[1,1]])
        .addSize([pub.BP[0],0], [[300,250],[320,100],[250,250],[200,200],[1,1],'fluid'])
        .build();
    }
    return null;
  }

  function defineSlot(el, slotName, slotId){
    el.id = slotId;
    const mapping = buildSizeMapping(el, slotName);
    if (!mapping || !pub.slotDimensions[slotName]) return null;
    const slotObj = googletag.defineSlot('/417417404/' + slotName, pub.slotDimensions[slotName], slotId)
      .defineSizeMapping(mapping)
      .addService(pub.ads)
      .setTargeting('pos', [el.dataset.pos]);
    pub.adSlots[slotId] = slotObj;
    return slotObj;
  }

  /* ============================
     LOADERS
     ============================ */
  function loadGPTOnce(src, onload){
    const tag = document.getElementById('gpt-js');
    if (tag){
      if (window.googletag && googletag.apiReady) { onload && onload(); }
      else {
        tag.addEventListener('load', function h(){ tag.removeEventListener('load', h); onload && onload(); }, {once:true});
      }
      return;
    }
    const s = document.createElement('script');
    s.id = 'gpt-js'; s.async = true; s.src = src; s.onload = onload;
    document.head.appendChild(s);
  }

  function loadYieldloveOnce(onload){
    if (window.__ylLoaded || document.getElementById('yl-js')) { onload && onload(); return; }
    // MUST be set before the script tag is appended (belt-and-suspenders)
    window.yieldlove_prevent_autostart = true;
    window.yieldlove_cmd = window.yieldlove_cmd || [];
    const s = document.createElement('script');
    s.id = 'yl-js';
    s.async = true;
    s.src = 'https://cdn-a.yieldlove.com/v2/yieldlove.js?abola.pt';
    s.onload = function(){ window.__ylLoaded = true; onload && onload(); };
    document.head.appendChild(s);
  }

  /* ============================
     PRIVACY (booleans only)
     ============================ */
  function applyPrivacy(mode){
    if (mode === 'la'){
      googletag.pubads().setPrivacySettings({ limitedAds: true,  nonPersonalizedAds: false });
    } else if (mode === 'npa'){
      googletag.pubads().setPrivacySettings({ nonPersonalizedAds: true, limitedAds: false });
    } else {
      googletag.pubads().setPrivacySettings({ nonPersonalizedAds: false, limitedAds: false });
    }
  }

  /* ============================
     OOP ensure-once
     ============================ */
  function findOOP(){
    try {
      return googletag.pubads().getSlots()
        .find(s => s.getSlotElementId && s.getSlotElementId() === 'oop') || null;
    } catch { return null; }
  }
  function ensureOOP(){
    if (pub.oopSlot && pub.oopSlot.getSlotElementId && pub.oopSlot.getSlotElementId()==='oop') return pub.oopSlot;
    const existing = findOOP();
    if (existing){ pub.oopSlot = existing; return existing; }
    const slot = googletag.defineOutOfPageSlot('/417417404/oop', 'oop');
    if (!slot){ console.warn('[ADS] OOP div already associated; skipping define'); return null; }
    slot.setCollapseEmptyDiv(true, true).addService(pub.ads);
    pub.oopSlot = slot;
    return slot;
  }

  /* ============================
     LOAD AD SLOT (gated; de-dupe refresh)
     ============================ */
  function loadAdSlot(el){
    if (!pub.adsReady) { pub.slotQueue.push(el); return; }

    const slotType = el.dataset.slotType;
    const pos = el.dataset.pos;
    if (!el.dataset.loaded && pubDisplay(el)){
      el.dataset.loaded = 'true';
      const slotId = slotType + pos;
      const slotObj = defineSlot(el, slotType, slotId);
      googletag.display(slotId);

      if (slotObj){
        slotObj.__requested = false;

        // GPT fallback if Yieldlove isn't ready or won't load
        slotObj.YLtimeout = setTimeout(() => {
          const bidderMissing = !window.YLHH || !YLHH.bidder || typeof YLHH.bidder.startAuction !== 'function';
          if (!slotObj.__requested && bidderMissing){
            slotObj.__requested = true;
            slotObj.setTargeting('tl', 'gpt');
            googletag.pubads().refresh([slotObj]);
          }
        }, 500);

        // Yieldlove takeover per-slot (no global startAuction)
        yieldlove_cmd.push(() => {
          clearTimeout(slotObj.YLtimeout);
          slotObj.setTargeting('tl', 'yl');
          if (!slotObj.__requested) slotObj.__requested = true;
          if (window.YLHH && YLHH.bidder && YLHH.bidder.cloneUnit){
            // third arg 'true' requests the unit immediately even with prevent_autostart
            YLHH.bidder.cloneUnit(slotObj.getAdUnitPath(), slotId, true);
          }
        });
      }
    }
  }
  window.loadAdSlot = loadAdSlot;

  /* ============================
     OBSERVERS (queue before consent)
     ============================ */
  pubSlotAttr();
  pub.adLoader = new IntersectionObserver(entries=>{
    entries.forEach(entry=>{
      if (entry.isIntersecting){
        (window.googletag = window.googletag || {cmd: []}).cmd.push(()=>loadAdSlot(entry.target));
        pub.adLoader.unobserve(entry.target);
      }
    });
  }, { rootMargin: pub.fetchDistance + 'px 0px' });

  Array.from(document.getElementsByClassName('ad'))
    .filter(el => el.id !== 'oop')
    .forEach(el => pub.adLoader.observe(el));

  const adMutationObserver = new MutationObserver(()=>{
    pubSlotAttr();
    Array.from(document.getElementsByClassName('ad')).forEach(el=>{
      if (el.id !== 'oop' && !el.dataset.loaded) pub.adLoader.observe(el);
    });
  });
  adMutationObserver.observe(document.body, { childList:true, subtree:true });

  /* ============================
     VISIBILITY REFRESH (after consent)
     ============================ */
  pub.windowTO = null;
  pub.windowInactiveTime = 15 * 1000;
  document.addEventListener('visibilitychange', function(){
    if (document.hidden) {
      pub.windowTO = Date.now();
    } else if (pub.windowTO) {
      const inactive = Date.now() - pub.windowTO; pub.windowTO = null;
      if (inactive > pub.windowInactiveTime && pub.adsReady && pub.ads && pub.adSlots){
        const slotsToRefresh = [];
        Object.entries(pub.adSlots).forEach(([slotId, slotObj])=>{
          const el = document.getElementById(slotId);
          if (slotObj && slotId!=='oop' && slotId!=='Interstitial' && el && el.dataset.loaded==='true' && getComputedStyle(el).display!=='none'){
            slotsToRefresh.push(slotObj);
          }
        });
        if (slotsToRefresh.length){
          if (window.YLHH && YLHH.bidder && YLHH.bidder.startAuction){
            YLHH.bidder.startAuction = ()=>{};
            googletag.pubads().refresh(slotsToRefresh);
          }
        }
      }
    }
  });

  /* ============================
     Sticky footer helpers
     ============================ */
  function stickyAd(){
    if (!document.getElementById('footersticky-style')){
      const style = document.createElement('style');
      style.id='footersticky-style';
      style.textContent = "#footersticky-container{transition:transform .5s cubic-bezier(.18,1.15,.73,1.02),opacity .5s;transform:translateY(100%);opacity:0;pointer-events:none;}#footersticky-container.footerstickyFX{transform:translateY(0);opacity:1;pointer-events:auto;}#footersticky-close{position:absolute;top:-1.8rem;right:0;width:25px;height:25px;background:#fafafa;color:#ad1421;font-size:22px;font-weight:bold;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:2147483648;border:1px solid #e9e9e9;transition:opacity .2s;line-height:1;margin-top:-2px;padding:0;font-family:sans-serif;}#footersticky-close:hover{background:#f6d809;color:#ad1421;}#footersticky-wrapper{position:relative;pointer-events:auto;background:#fff;box-shadow:0 -2px 8px rgba(0,0,0,.12);border-radius:10px 10px 0 0;margin-bottom:0;min-width:300px;min-height:50px;max-width:100vw;overflow:visible;display:flex;align-items:center;justify-content:center;}#footersticky-container{position:fixed;left:0;bottom:0;width:100vw;display:flex;justify-content:center;align-items:flex-end;background:transparent;z-index:98;}";
      document.head.appendChild(style);
    }
    if (document.getElementById('footersticky-container')) return;
    const container = document.createElement('div'); container.id='footersticky-container';
    const adWrapper = document.createElement('div'); adWrapper.id='footersticky-wrapper';
    const closeBtn = document.createElement('button'); closeBtn.textContent='×'; closeBtn.title='Close Ad'; closeBtn.id='footersticky-close';
    closeBtn.onclick = ()=>{ container.remove(); googletag.cmd.push(()=>{ if (pub.adSlots['footersticky1']) googletag.destroySlots([pub.adSlots['footersticky1']]); }); };
    const stickyAdDiv = document.createElement('div'); stickyAdDiv.className='ad footersticky'; stickyAdDiv.id='footersticky1'; stickyAdDiv.dataset.slotType='footersticky'; stickyAdDiv.dataset.pos='1';
    adWrapper.appendChild(closeBtn); adWrapper.appendChild(stickyAdDiv); container.appendChild(adWrapper); document.body.appendChild(container);
    if (pub.adLoader) pub.adLoader.observe(stickyAdDiv);
  }
  function setSticky(){
    const lastTime = parseInt(localStorage.getItem(pub.setfooterstickyStorageCap),10);
    if (!lastTime || isNaN(lastTime)) return true;
    return (Date.now() - lastTime) > pub.footerstickyTimer;
  }
  function setStickyCap(){ localStorage.setItem(pub.setfooterstickyStorageCap, Date.now()); }

  /* ============================
     CMP (OneTrust local) → decide + boot
     ============================ */
  function getGroups(){ return (window.OnetrustActiveGroups || '').split(',').filter(Boolean); }
  function isRejectAll(){ const g = getGroups(); return g.length===1 && g[0]==='C0001'; }
  function hasTargeting(){ return getGroups().includes(TARGETING_CAT_ID); }
  function allowAdCookies(){ return hasTargeting(); } // shorthand
  function decideModeFromOT(){ if (isRejectAll()) return 'la'; if (!hasTargeting()) return 'npa'; return 'pa'; }

  function startFromCMP(reason){
    if (!window.OneTrust || !OneTrust.IsAlertBoxClosed()) return;

    const mode = decideModeFromOT();
    console.debug('[ADS] CMP trigger:', reason, 'mode:', mode, 'groups:', getGroups().join(','));

    if (pub.adsReady){
      googletag.cmd.push(function(){
        if (mode==='la' && pub.gptBuild !== 'la'){
          console.warn('[ADS] LA chosen but standard GPT loaded; falling back to NPA until reload.');
          applyPrivacy('npa');
        } else {
          applyPrivacy(mode);
        }

        // update page-level privacy targeting on consent change
        googletag.pubads().setTargeting('adReq', [mode]);

        const slots = googletag.pubads().getSlots();
        if (slots.length){ googletag.pubads().clear(slots); googletag.pubads().refresh(slots); }
      });
      return;
    }

    // first-time boot guard
    if (pub.booting){ console.debug('[ADS] boot already running (',reason,')'); return; }
    pub.booting = true;

    const gptSrcStd = 'https://securepubads.g.doubleclick.net/tag/js/gpt.js';
    const gptSrcLA  = 'https://pagead2.googlesyndication.com/tag/js/gpt.js';

    // Load order policy:
    // - LA: skip YL, load GPT LA
    // - NPA (no C0004): skip YL, load GPT std (NPA)
    // - PA (with C0004): load YL first, then GPT std
    if (mode === 'la'){
      loadGPTOnce(gptSrcLA, afterGPT);
    } else if (allowAdCookies()) {
      loadYieldloveOnce(() => loadGPTOnce(gptSrcStd, afterGPT));
    } else {
      loadGPTOnce(gptSrcStd, afterGPT);
    }

    function afterGPT(){
      pub.gptBuild = (mode==='la') ? 'la' : 'std';
      googletag.cmd.push(function(){
        // 1) privacy BEFORE any requests
        if (mode==='la' && pub.gptBuild!=='la'){
          console.warn('[ADS] LA requested but std GPT present; applying NPA as fallback.');
          applyPrivacy('npa');
        } else {
          applyPrivacy(mode);
        }

        // 2) pubads config (PAGE-LEVEL TARGETING HERE)
        pub.ads = googletag.pubads();
        pub.ads.setTargeting('privacy', [mode]); // <- added

        pub.ads.setTargeting('end', pub.fEnd);
        if (pub.KV.id) pub.ads.setTargeting('id', pub.KV.id);
        if (Array.isArray(pub.KV.interests) && pub.KV.interests.length){
          pub.ads.setTargeting('category', [pub.KV.interests[0]]);
          if (pub.KV.interests.length>1) pub.ads.setTargeting('kw', pub.KV.interests.slice(1));
        }
        if (Array.isArray(pub.KV.pageType) && pub.KV.pageType.length){
          pub.ads.setTargeting('type', pub.KV.pageType);
        }
        pub.ads.setTargeting('viewport', pubBreakPointLabel(window.innerWidth));
        pub.ads.setCentering(true);
        pub.ads.enableVideoAds();
        pub.ads.enableSingleRequest();
        pub.ads.disableInitialLoad();

        // 3) listeners
        pub.ads.addEventListener('slotRenderEnded', function (event) {
          if (event.slot.getSlotElementId()==='footersticky1' && !event.isEmpty){
            const container = document.getElementById('footersticky-container');
            if (pub.footerstickyWL && event.campaignId && pub.footerstickyWL[event.campaignId] && event.size && event.size[0]===1 && event.size[1]===1){
              const stickyDiv = document.getElementById('footersticky1');
              if (stickyDiv) stickyDiv.classList.remove('txt');
              if (container) container.remove();
              const styleEl = document.getElementById('footersticky-style'); if (styleEl) styleEl.remove();
              const closeEl = document.getElementById('footersticky-close'); if (closeEl) closeEl.remove();
              return;
            } else {
              setStickyCap();
              if (container){
                container.classList.add('footerstickyFX');
                document.getElementById('footersticky1').classList.add('txt');
              }
            }
          }

          if (event.slot.getSlotElementId()==='oop' && event.isEmpty){
            googletag.pubads().clear([pub.oopSlot]);
            googletag.destroySlots([pub.oopSlot]);

            if (setSticky()){
              if (!pub.stickyAdTriggerSet){
                pub.stickyAdTriggerSet = true;
                let t=null;
                function onScrollStickyTrigger(){
                  if (t) clearTimeout(t);
                  t = setTimeout(()=>{
                    if (window.scrollY >= pub.footerDistance){ stickyAd(); window.removeEventListener('scroll', onScrollStickyTrigger); }
                    t=null;
                  }, pub.dbDelay);
                }
                window.addEventListener('scroll', onScrollStickyTrigger);
              }
            }
            const inter = googletag.defineOutOfPageSlot('/417417404/Interstitial', googletag.enums.OutOfPageFormat.INTERSTITIAL);
            if (inter){
              inter.setTargeting('pos','gaminterstitial').addService(pub.ads)
                   .setConfig({ interstitial: { triggers: { unhideWindow: true } } });
              googletag.display(inter);
            }
          }

          const eligible = ['vert','horz','inline','mrec'];
          if (!event.isEmpty){
            const el = document.getElementById(event.slot.getSlotElementId());
            if (el && eligible.includes(el.dataset.slotType)) el.classList.add('txt');
          }
        });

        pub.ads.addEventListener('impressionViewable', function (event) {
          if (!event.isEmpty && event.slot !== pub.oopSlot){
            const el = document.getElementById(event.slot.getSlotElementId());
            if (el) el.classList.add('\u2714');
          }
        });

        // 4) define OOP once (if not forbidden), then enable services
        let oop = null;
        if (!isAdCategoryForbidden(pub)){ oop = ensureOOP(); }
        googletag.enableServices();
        pub.adsReady = true;
        pub.booting  = false;

        if (oop){ googletag.display('oop'); googletag.pubads().refresh([oop]); }

        // 5) flush queued in-page slots
        pub.slotQueue.splice(0).forEach(el => loadAdSlot(el));

        console.log('[ADS] Boot complete. OT groups:', (window.OnetrustActiveGroups||''), 'mode:', mode, 'gptBuild:', pub.gptBuild);
      });
    }
  }

  /* hook OneTrust (local) */
  (function waitForOT(){
    if (!window.OneTrust || typeof OneTrust.IsAlertBoxClosed !== 'function') return setTimeout(waitForOT, 50);
    // returning visitor (stored consent)
    startFromCMP('initial');

    // new decisions / changes
    const orig = window.OptanonWrapper;
    window.OptanonWrapper = function(){ try{ if (typeof orig==='function') orig(); }catch(_){} startFromCMP('OptanonWrapper'); };
    if (typeof OneTrust.OnConsentChanged === 'function'){
      try { OneTrust.OnConsentChanged(() => startFromCMP('OnConsentChanged')); } catch(_){}
    }
  })();

}); // DOMContentLoaded

} // end one-time guard
</script>









