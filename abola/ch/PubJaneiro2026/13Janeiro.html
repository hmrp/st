





 <script>
window.googletag = window.googletag || { cmd: [] };

function getGeo() {
  try {
    const dl = window.dataLayer;
    if (!Array.isArray(dl)) return null;

    if (dl[1] && typeof dl[1] === 'object' && dl[1].cf_country_code) {
      return dl[1].cf_country_code;
    }

    for (let i = 0; i < dl.length; i++) {
      const o = dl[i];
      if (o && typeof o === 'object' && o.cf_country_code) {
        return o.cf_country_code;
      }
    }
  } catch (e) {}
  return null;
}

function pubBreakPoint(w) {
  for (let i = pub.BP.length - 1; i >= 0; i--) {
    if (w >= pub.BP[i]) return i;
  }
  return 0;
}

function pubBreakPointLabel(w) {
  return pub.BPLabels[pubBreakPoint(w)];
}

function onFooterStickyScroll() {
  try {
    if (!window.pub) return;
    if (!pub.deferFooterSticky) return;

    var y =
      window.scrollY ||
      window.pageYOffset ||
      document.documentElement.scrollTop ||
      document.body.scrollTop ||
      0;

    if (typeof pub.footerDistance === 'number' && y < pub.footerDistance) {
      return;
    }

    pub.deferFooterSticky = false;
    if (pub.footerstickyScrollListenerAttached) {
      window.removeEventListener('scroll', onFooterStickyScroll);
      pub.footerstickyScrollListenerAttached = false;
    }

    stickyAd();
  } catch (e) {}
}

function stickyAd() {
  if (window.pub && typeof pub.isFooterStickyBlockedByContent === 'function') {
    if (pub.isFooterStickyBlockedByContent()) {
      return;
    }
  }
  if (window.pub && typeof pub.isFooterStickyCapActive === 'function') {
    if (pub.isFooterStickyCapActive()) {
      return;
    }
  }

  try {
    if (window.pub && typeof pub.footerDistance === 'number') {
      var y =
        window.scrollY ||
        window.pageYOffset ||
        document.documentElement.scrollTop ||
        document.body.scrollTop ||
        0;

      if (y < pub.footerDistance) {
        if (window.pub) {
          pub.deferFooterSticky = true;
          if (!pub.footerstickyScrollListenerAttached) {
            pub.footerstickyScrollListenerAttached = true;
            window.addEventListener('scroll', onFooterStickyScroll, { passive: true });
          }
        }
        return;
      }
    }
  } catch (e) {}

  if (!document.getElementById('footersticky-style')) {
    const style = document.createElement('style');
    style.id = 'footersticky-style';
    style.textContent =
      "#footersticky-container{transition:transform .5s cubic-bezier(.18,1.15,.73,1.02),opacity .5s;transform:translateY(100%);opacity:0;pointer-events:none;}#footersticky-container.footerstickyFX{transform:translateY(0);opacity:1;pointer-events:auto;}#footersticky-close{position:absolute;top:-1.8rem;right:0;width:25px;height:25px;background:#fafafa;color:#ad1421;font-size:22px;font-weight:bold;cursor:pointer;display:flex;align-items:center;justify-content:center;z-index:2147483648;border:1px solid #e9e9e9;transition:opacity .2s;line-height:1;margin-top:-2px;padding:0;font-family:sans-serif;}#footersticky-close:hover{background:#f6d809;color:#ad1421;}#footersticky-wrapper{position:relative;pointer-events:auto;background:#fff;box-shadow:0 -2px 8px rgba(0,0,0,.12);border-radius:10px 10px 0 0;margin-bottom:0;min-width:300px;min-height:50px;max-width:100vw;overflow:visible;display:flex;align-items:center;justify-content:center;}#footersticky-container{position:fixed;left:0;bottom:0;width:100vw;display:flex;justify-content:center;align-items:flex-end;background:transparent;z-index:98;}";
    document.head.appendChild(style);
  }
  if (document.getElementById('footersticky-container')) return;

  const container = document.createElement('div');
  container.id = 'footersticky-container';

  const adWrapper = document.createElement('div');
  adWrapper.id = 'footersticky-wrapper';

  const closeBtn = document.createElement('button');
  closeBtn.textContent = 'Ã—';
  closeBtn.title = 'Close Ad';
  closeBtn.id = 'footersticky-close';
  closeBtn.onclick = () => {
    container.remove();
    if (window.pub && pub.adsReady && pub.adSlots && pub.adSlots['footersticky'] && window.googletag) {
      googletag.destroySlots([pub.adSlots['footersticky']]);
    }
  };

  const stickyAdDiv = document.createElement('div');
  stickyAdDiv.className = 'ad footersticky';
  stickyAdDiv.id = 'footersticky';
  stickyAdDiv.dataset.slotType = 'footersticky';
 stickyAdDiv.dataset.pos = '1';
  adWrapper.appendChild(closeBtn);
  adWrapper.appendChild(stickyAdDiv);
  container.appendChild(adWrapper);
  document.body.appendChild(container);

  if (window.pub) {
    const isRingier =
      (pub.geo === 'CH') || (pub.fEnd && pub.fEnd[0] === 'ch');

    if (isRingier && pub.ringierElement && window.admTagMan) {
      try {
        pub.ringierElement(stickyAdDiv);
        if (typeof admTagMan.loadSlots === 'function') {
          admTagMan.loadSlots();
        }
      } catch (e) {}
    } else if (pub.adLoader && pub.adLoader.observe) {
      pub.adLoader.observe(stickyAdDiv);
    }
  }
}

function setSticky() {
  try {
    if (window.pub && typeof pub.isFooterStickyCapActive === 'function') {
      return !pub.isFooterStickyCapActive();
    }
    const lastTime = parseInt(localStorage.getItem(pub.setfooterstickyStorageCap), 10);
    if (!lastTime || isNaN(lastTime)) return true;
    return (Date.now() - lastTime) > pub.footerstickyTimer;
  } catch (e) {
    return true;
  }
}

function setStickyCap() {
  try {
    localStorage.setItem(pub.setfooterstickyStorageCap, Date.now());
  } catch (e) {}
}

document.addEventListener('DOMContentLoaded', function () {
  window.pub = window.pub || {};
  window.googletag = window.googletag || { cmd: [] };

  pub.geo = getGeo();
  pub.adSlots = {};
  pub.oopSlot = null;

  pub.slotClasses = ['horz', 'vert', 'inline', 'mrec', 'footersticky', 'oop'];
  pub.slotPos = { horz: 0, vert: 0, inline: 0, footersticky: 0, mrec: 0 };

  pub.BP = [0, 640, 768, 1025, 1260];
  pub.BPLabels = ['mobile', 'phablet', 'tablet', 'smalldesktop', 'widedesktop'];
  pub.currentBP = pubBreakPoint(window.innerWidth);
  pub.currentBPLabel = pub.BPLabels[pub.currentBP];

  pub.fetchDistance = Math.max(500, Math.floor(window.innerHeight * 0.80));
  pub.footerDistance = Math.max(350, Math.floor(window.innerHeight * 0.65));

  pub.setfooterstickyStorageCap = 'adfooterstickyCap';
  pub.footerstickyTimer = 5 * 60 * 1000;

  pub.footerstickyWL = {
    '3483087791': true,
    '3556005506': true,
    '3558075999': true
  };

  pub.KV = {};
  pub.exclusiveContent = ['noticia-patrocinada', 'livescore', 'mercado', 'matchhub', 'man-of-the-match'];
  pub.consent = ['C0004', 'V2STACK42'];
  pub.consentState = null;

  pub.footerstickyFallbackDone = false;
  pub.footerstickyShown = false;
  pub.deferFooterSticky = false;
  pub.footerstickyScrollListenerAttached = false;

  pub.interstitialRequested = false;
  pub.servicesEnabled = false;

  pub.slotDimensions = {
    horz: [
      [1260, 220],[1150, 250],[970, 250],[970, 90],[728, 90],[640, 100],[468, 60],[460, 60],
      [320, 100],[320, 160],[300, 120],[320, 50],[300, 100],[300, 75],[300, 50],[1, 1]
    ],
    vert: [
      [300, 600],[300, 250],[336, 600],[336, 320],[336, 280],[160, 600],[120, 600],[250, 250],[200, 200],
      [320, 100],[320, 160],[300, 120],[320, 50],[300, 100],[300, 75],[300, 50],[1, 1],'fluid'
    ],
    inline: [
      [300, 250],[336, 320],[336, 280],[250, 250],[200, 200],[640, 100],[468, 60],[460, 60],
      [320, 100],[320, 160],[300, 120],[320, 50],[300, 100],[300, 75],[300, 50],[1, 1],'fluid'
    ],
    footersticky: [
      [970, 90],[728, 90],[640, 100],[468, 60],[460, 60],[360, 100],[360, 50],
      [320, 160],[300, 120],[320, 100],[320, 50],[300, 100],[300, 75],[300, 50],[1, 1]
    ],
    mrec: [
      [300, 250],[320, 100],[250, 250],[200, 200],[1, 1],'fluid'
    ]
  };

  if (location.search.length > 1) {
    pub.fEnd = [
      encodeURIComponent(
        decodeURIComponent(location.search.slice(1).replace(/\+/g, ' '))
      )
    ];
  }

  function isRingierMode() {
    return (pub.geo === 'CH') || (pub.fEnd && pub.fEnd[0] === 'ch');
  }

  if (!document.getElementById('oop')) {
    const oopEl = document.createElement('div');
    oopEl.id = 'oop';
    oopEl.className = 'ad oop';
    oopEl.style.cssText =
      'position:fixed;left:0;top:0;z-index:2147483645;width:1px;height:1px;';
    document.body.prepend(oopEl);
  }

  function ringierInterstitial() {
    let el = document.getElementById('interstitial');
    if (el) return el;

    el = document.createElement('div');
    el.id = 'interstitial';
    el.className = 'ad interstitial';
    el.dataset.slotType = 'interstitial';
    el.dataset.pos = '1';
    el.style.cssText = 'position:fixed;left:0;top:0;width:1px;height:1px;z-index:2147483646;';
    document.body.prepend(el);
    return el;
  }

  const registered = {};

  function getSlotType(el) {
    return pub.slotClasses.find((t) => el.classList.contains(t)) || null;
  }

  function pubDisplay(el) {
    if (!el) return false;
    if (typeof el.checkVisibility === 'function') {
      return el.checkVisibility({ contentVisibilityAuto: false });
    }
    if (!(el.getClientRects && el.getClientRects().length)) return false;
    let curr = el;
    while (curr) {
      const style = getComputedStyle(curr);
      if (style.display === 'none' || style.visibility === 'hidden') {
        return false;
      }
      curr = curr.parentElement;
    }
    return true;
  }

  function pubIds() {
    const ads = document.getElementsByClassName('ad');
    const slotPos = pub.slotPos;

    for (let i = 0; i < ads.length; i++) {
      const el = ads[i];
      const type = getSlotType(el);
      if (!type || !pubDisplay(el)) continue;

      let pos = el.dataset.pos ? parseInt(el.dataset.pos, 10) : NaN;
      if (!Number.isInteger(pos)) {
        pos = (slotPos[type] || 0) + 1;
        slotPos[type] = pos;
        el.dataset.pos = String(pos);
      }

      if (!el.id) {
        el.id = type + pos;
      }

      el.dataset.slotType = type;
    }
  }

  function buildSizeMapping(el, slotName) {
    if (!window.googletag || !googletag.sizeMapping) return null;

    if (slotName === 'vert') {
      return googletag.sizeMapping()
        .addSize([pub.BP[3], 0], [[300, 600],[300, 250],[250, 250],[200, 200],[160, 600],[120, 600],[1, 1]])
        .addSize([pub.BP[2], 0], [[300, 600],[300, 250],[250, 250],[200, 200],[1, 1]])
        .addSize([pub.BP[0], 0], [[300, 600],[300, 250],[336, 320],[336, 280],[336, 600],[250, 250],[200, 200],[320, 100],[320, 160],[300, 120],[320, 50],[300, 100],[300, 75],[300, 50],[1, 1],'fluid'])
        .build();
    }
    if (slotName === 'horz') {
      return googletag.sizeMapping()
        .addSize([pub.BP[4], 0], [[1260, 220],[1150, 250],[970, 250],[1, 1]])
        .addSize([pub.BP[3], 0], [[970, 250],[1, 1]])
        .addSize([pub.BP[2], 0], [[728, 90],[1, 1]])
        .addSize([pub.BP[1], 0], [[468, 60],[460, 60],[320, 100],[320, 160],[300, 120],[320, 50],[300, 100],[300, 75],[300, 50],[1, 1]])
        .addSize([pub.BP[0], 0], [[320, 100],[320, 160],[300, 120],[320, 50],[300, 100],[300, 75],[300, 50],[1, 1]])
        .build();
    }
    if (slotName === 'inline') {
      return googletag.sizeMapping()
        .addSize([pub.BP[2], 0], [[640, 100],[300, 250],[468, 60],[460, 60],[250, 250],[200, 200],[1, 1],'fluid'])
        .addSize([pub.BP[1], 0], [[468, 60],[460, 60],[320, 160],[320, 100],[320, 50],[300, 250],[300, 120],[300, 100],[300, 75],[300, 50],[250, 250],[200, 200],[1, 1],'fluid'])
        .addSize([pub.BP[0], 0], [[336, 320],[336, 280],[320, 160],[320, 100],[320, 50],[300, 250],[300, 120],[300, 100],[300, 75],[300, 50],[250, 250],[200, 200],[1, 1],'fluid'])
        .build();
    }
    if (slotName === 'footersticky') {
      return googletag.sizeMapping()
        .addSize([pub.BP[3], 0], [[970, 90],[728, 90],[640, 100],[1, 1]])
        .addSize([pub.BP[2], 0], [[728, 90],[468, 60],[640, 100],[1, 1]])
        .addSize([pub.BP[1], 0], [[468, 60],[460, 60],[360, 100],[360, 50],[320, 100],[320, 160],[300, 120],[320, 50],[300, 100],[300, 75],[300, 50],[1, 1]])
        .addSize([pub.BP[0], 0], [[320, 100],[320, 160],[300, 120],[320, 50],[300, 100],[300, 75],[300, 50],[1, 1]])
        .build();
    }
    if (slotName === 'mrec') {
      return googletag.sizeMapping()
        .addSize([pub.BP[2], 0], [[300, 250],[250, 250],[200, 200],[1, 1]])
        .addSize([pub.BP[0], 0], [[300, 250],[320, 100],[250, 250],[200, 200],[1, 1],'fluid'])
        .build();
    }
    return null;
  }

  function isValidPos(v) {
    const n = parseInt(v, 10);
    return !isNaN(n) && n > 0;
  }

  function adSlotElementCheck(slotId) {
    try {
      if (!window.googletag || !googletag.pubads) return null;
      const slots = googletag.pubads().getSlots();
      for (let i = 0; i < slots.length; i++) {
        const s = slots[i];
        if (s.getSlotElementId && s.getSlotElementId() === slotId) return s;
      }
    } catch (e) {}
    return null;
  }

  function isAdGallery(el) {
    if (!el) return false;
    if (el.dataset) {
      if (el.dataset.slotName === 'gallery') return true;
      if (el.dataset.pos === 'gallery') return true;
    }
    return false;
  }

  function adTxt(slotElementId) {
    if (!slotElementId) return;
    const el = document.getElementById(slotElementId);
    if (!el) return;
    const type = el.dataset.slotType || getSlotType(el);
    if (!type) return;
    if (type === 'oop') return;
    if (type === 'interstitial') return;
    el.classList.add('txt');
  }

  pub.isFooterStickyBlockedByContent = function () {
    try {
      const exclusive = pub.exclusiveContent || [];
      if (!exclusive.length) return false;

      if (!pub.KV || !Object.keys(pub.KV).length) {
        parseAdKV();
      }

      let category = null;
      if (Array.isArray(pub.KV.interests) && pub.KV.interests.length) {
        category = pub.KV.interests[0];
      }

      let subcats = [];
      const osSubcats = getSubCategoryTag();
      if (Array.isArray(osSubcats) && osSubcats.length) {
        subcats = osSubcats;
      } else if (Array.isArray(pub.KV.meta) && pub.KV.meta.length > 1) {
        subcats = pub.KV.meta.slice(1);
      }

      const matchCategory = category && exclusive.indexOf(category) !== -1;
      const matchSub = subcats.some((v) => exclusive.indexOf(v) !== -1);

      return (matchCategory || matchSub) ? true : false;
    } catch (e) {
      return false;
    }
  };

  pub.isFooterStickyCapActive = function () {
    try {
      const key = pub.setfooterstickyStorageCap;
      const lastTime = parseInt(localStorage.getItem(key), 10);
      if (!lastTime || isNaN(lastTime)) return false;

      const diff = Date.now() - lastTime;
      return diff <= pub.footerstickyTimer;
    } catch (e) {
      return false;
    }
  };

  function cmpReqTargeting(consentState) {
    if (!pub.ads || !pub.ads.setTargeting) return;

    let val = 'pa';
    if (consentState && consentState.mode) {
      if (consentState.mode === 'la') val = 'la';
      else if (consentState.mode === 'npa') val = 'npa';
      else if (consentState.mode === 'pa') val = 'pa';
    }

    try {
      pub.ads.setTargeting('adReq', [val]);
    } catch (e) {}
  }

  function ringierLoadInterstitial(delayMs) {
    try {
      var delay = typeof delayMs === 'number' && delayMs > 0 ? delayMs : 0;

      if (pub.interstitialRequested) return;
      pub.interstitialRequested = true;

      if (window.pub && typeof pub.isFooterStickyBlockedByContent === 'function' && pub.isFooterStickyBlockedByContent()) {
        return;
      }

      setTimeout(function () {
        try {
          if (!window.admTagMan || typeof admTagMan.registerSlot !== 'function') {
            return;
          }
          if (!pub.ringierElement) {
            return;
          }

          const el = ringierInterstitial();
          pub.ringierElement(el);

          if (typeof admTagMan.loadSlots === 'function') {
            admTagMan.loadSlots();
          }
        } catch (e) {}
      }, delay);
    } catch (e) {}
  }

  function loadInterstitial(delayMs) {
    try {
      if (isRingierMode()) {
        ringierLoadInterstitial(delayMs);
        return;
      }

      var delay = typeof delayMs === 'number' && delayMs > 0 ? delayMs : 0;

      if (
        window.pub &&
        typeof pub.isFooterStickyBlockedByContent === 'function' &&
        pub.isFooterStickyBlockedByContent()
      ) {
        return;
      }

      if (pub.interstitialRequested) {
        return;
      }
      pub.interstitialRequested = true;

      function runInterstitial() {
        googletag.cmd.push(function () {
          try {
            if (!pub.ads) {
              pub.ads = googletag.pubads();

              if (
                pub.consentState &&
                (pub.consentState.mode === 'npa' || pub.consentState.mode === 'la')
              ) {
                pub.ads.setPrivacySettings({
                  nonPersonalizedAds: true
                });
              }

              cmpReqTargeting(pub.consentState);
              adKVtargeting();
            }

            if (!pub.servicesEnabled) {
              googletag.enableServices();
              pub.servicesEnabled = true;
            }

            if (
              !googletag.enums ||
              !googletag.enums.OutOfPageFormat ||
              !googletag.enums.OutOfPageFormat.INTERSTITIAL
            ) {
              return;
            }

            const inter = googletag.defineOutOfPageSlot(
              '/417417404/Interstitial',
              googletag.enums.OutOfPageFormat.INTERSTITIAL
            );

            if (inter) {
              inter
                .setTargeting('pos', 'interstitial')
                .addService(pub.ads)
                .setConfig({
                  interstitial: {
                    triggers: {
                      unhideWindow: true
                    }
                  }
                });

              googletag.display(inter);

              try {
                if (pub.ads && typeof pub.ads.refresh === 'function') {
                  pub.ads.refresh([inter]);
                }
              } catch (e) {}
            }
          } catch (e) {}
        });
      }

      if (delay > 0) {
        setTimeout(runInterstitial, delay);
      } else {
        runInterstitial();
      }
    } catch (e) {}
  }

  function triggerFooterStickyFromOOP() {
    if (pub.footerstickyFallbackDone) {
      return;
    }
    pub.footerstickyFallbackDone = true;

    const isExclusiveBlocked =
      window.pub &&
      typeof pub.isFooterStickyBlockedByContent === 'function' &&
      pub.isFooterStickyBlockedByContent();

    if (isExclusiveBlocked) {
      return;
    }

    const capActive =
      window.pub &&
      typeof pub.isFooterStickyCapActive === 'function' &&
      pub.isFooterStickyCapActive();

    try {
      if (!capActive) {
        stickyAd();
      }

      loadInterstitial(1000);
    } catch (e) {}
  }

  function adFooterAfterOOP() {
    if (pub.footerstickyFallbackDone) {
      return;
    }
    pub.footerstickyFallbackDone = true;

    const isExclusiveBlocked =
      window.pub &&
      typeof pub.isFooterStickyBlockedByContent === 'function' &&
      pub.isFooterStickyBlockedByContent();

    if (isExclusiveBlocked) {
      return;
    }

    const capActive =
      window.pub &&
      typeof pub.isFooterStickyCapActive === 'function' &&
      pub.isFooterStickyCapActive();

    try {
      if (!capActive) {
        stickyAd();
      }

      loadInterstitial(1000);
    } catch (e) {}
  }

  function handleFooterStickyRendered(slotElementId) {
    if (pub.footerstickyShown) return;
    pub.footerstickyShown = true;

    try {
      if (typeof setSticky === 'function' && !setSticky()) {
        return;
      }

      const container = document.getElementById('footersticky-container');
      if (container) {
        container.classList.add('footerstickyFX');
      }

      adTxt(slotElementId);

      if (typeof setStickyCap === 'function') {
        setStickyCap();
      }
    } catch (e) {}
  }

  function parseKV(val) {
    if (val == null) return null;
    const s = String(val)
      .normalize('NFD')
      .replace(/[\u0300-\u036f]/g, '')
      .toLowerCase()
      .replace(/[^a-z0-9_-]+/g, '-')
      .replace(/-{2,}/g, '-')
      .replace(/^-+|-+$/g, '');
    return s ? s.slice(0, 40) : null;
  }

  function getSubCategoryTag() {
    try {
      const dl = window.dataLayer;
      if (!dl || !Array.isArray(dl)) return null;

      const collected = [];

      for (let i = 0; i < dl.length; i++) {
        const obj = dl[i];
        if (!obj || typeof obj !== 'object') continue;

        if (Array.isArray(obj.os_tags) && obj.os_tags.length) {
          const rawOs =
            obj.os_tags.length === 1 ? obj.os_tags.slice(0) : obj.os_tags.slice(1);
          collected.push(...rawOs);
        }

        if (Array.isArray(obj.tags_extra) && obj.tags_extra.length) {
          collected.push(...obj.tags_extra);
        }
      }
      const normalized = collected.map(parseKV).filter(Boolean);
      const unique = [];
      const seen = new Set();
      for (const v of normalized) {
        if (seen.has(v)) continue;
        seen.add(v);
        unique.push(v);
      }

      return unique.length ? unique : null;
    } catch (e) {}
    return null;
  }

  function parseAdKV() {
    let srcKV = null;

    try {
      if (typeof adsKeywords !== 'undefined' &&
        adsKeywords &&
        typeof adsKeywords === 'object') {
        srcKV = adsKeywords;
      }
    } catch (e) {}

    if (!srcKV) {
      return;
    }

    Object.entries(srcKV).forEach(([key, val]) => {
      if (key === 'id') {
        const idVal = Array.isArray(val) ? val[0] : val;
        if (idVal != null) pub.KV.id = String(idVal);
        return;
      }

      if (Array.isArray(val)) {
        const kvValues = val.map(parseKV).filter(Boolean);
        if (kvValues.length) pub.KV[key] = kvValues;
      } else {
        const singleValue = parseKV(val);
        if (singleValue) pub.KV[key] = [singleValue];
      }
    });
  }

  function buildSharedKVs() {
    const kv = {};
    parseAdKV();

    if (pub.fEnd && pub.fEnd.length) {
      kv.end = pub.fEnd;
    }
    if (pub.KV.id) {
      kv.id = pub.KV.id;
    }

    if (Array.isArray(pub.KV.interests) && pub.KV.interests.length) {
      kv.category = [pub.KV.interests[0]];
      if (pub.KV.interests.length > 1) {
        kv.kw = pub.KV.interests.slice(1);
      }
    }

    if (Array.isArray(pub.KV.pageType) && pub.KV.pageType.length) {
      kv.type = pub.KV.pageType;
    }

    const osSubcats = getSubCategoryTag();
    if (Array.isArray(osSubcats) && osSubcats.length) {
      kv.subcategory = osSubcats;
    } else if (Array.isArray(pub.KV.meta) && pub.KV.meta.length > 1) {
      kv.subcategory = pub.KV.meta.slice(1);
    }

    const vpLabel = pubBreakPointLabel(window.innerWidth);
    if (vpLabel) {
      kv.viewport = vpLabel;
    }

    var cs = pub.consentState;
    var adReqVal = 'pa';
    if (cs && cs.mode === 'la') {
      adReqVal = 'la';
    } else if (cs && cs.mode === 'npa') {
      adReqVal = 'npa';
    }
    kv.adReq = [adReqVal];

    return kv;
  }

  function adKVtargeting() {
    if (!pub.ads || !pub.ads.setTargeting) return;

    const kv = buildSharedKVs();

    Object.keys(kv).forEach((key) => {
      const val = kv[key];
      try {
        pub.ads.setTargeting(key, val);
      } catch (e) {}
    });
  }

  function defineSlot(el, slotName, slotId) {
    if (!document.getElementById(slotId)) return null;
    el.id = slotId;

    const adGalleryExist = isAdGallery(el) || /^adgallery/.test(slotId);
    const adCheck = adSlotElementCheck(slotId);

    if (adCheck) {
      try {
        if (adGalleryExist) {
          adCheck.setTargeting('pos', ['gallery']);
        } else {
          const curr = adCheck.getTargeting && adCheck.getTargeting('pos');
          const hasCurr = Array.isArray(curr) && curr.length && isValidPos(curr[0]);
          const elPos = el && el.dataset ? el.dataset.pos : null;
          if (!hasCurr && isValidPos(elPos)) {
            adCheck.setTargeting('pos', [String(elPos)]);
          }
        }
      } catch (e) {}
      pub.adSlots[slotId] = adCheck;
      return adCheck;
    }

    const mapping = buildSizeMapping(el, slotName);
    if (!mapping || !pub.slotDimensions[slotName]) return null;

    const slotObj = googletag.defineSlot(
      '/417417404/' + slotName,
      pub.slotDimensions[slotName],
      slotId
    );
    if (!slotObj) return null;

    slotObj.defineSizeMapping(mapping).addService(pub.ads);

    if (adGalleryExist) {
      slotObj.setTargeting('pos', ['gallery']);
    } else if (isValidPos(el && el.dataset ? el.dataset.pos : null)) {
      slotObj.setTargeting('pos', [String(el.dataset.pos)]);
    }

    pub.adSlots[slotId] = slotObj;
    return slotObj;
  }

  const ringierAdunitMap = {
    desktop: {
      home: {
        mrec: 'side-right_ad_2',
        inline: 'details_ad_1',
        vert: 'side-right_ad_1',
        horz: (pos) => (pos === 1 ? 'top_ad_1' : 'index_ad_1'),
        footersticky: 'sticky_ad_1',
        interstitial: 'interstitial_1',
        oop: 'top_special_1'
      },
      ros: {
        mrec: 'side-right_ad_2',
        inline: 'details_ad_1',
        vert: 'side-right_ad_1',
        horz: (pos) => (pos === 1 ? 'top_ad_1' : 'index_ad_1'),
        footersticky: 'sticky_ad_1',
        interstitial: 'interstitial_1',
       oop: 'top_special_1'
      }
    },
    mobile: {
      home: {
        mrec: 'index_ad_4',
        inline: 'index_ad_3',
        vert: 'index_ad_2',
        horz: (pos) => (pos === 1 ? 'top_ad_1' : 'index_ad_1'),
        footersticky: 'sticky_ad_1',
        interstitial: 'interstitial_1',
        oop: 'top_special_1'
      },
      ros: {
        mrec: 'details_ad_3',
        inline: 'details_ad_2',
        vert: 'details_ad_1',
        horz: 'top_ad_1',
        footersticky: 'sticky_ad_1',
        interstitial: 'interstitial_1',
        oop: 'top_special_1'
      }
    }
  };

  function getRingierProfile() {
    const deviceKey = pub.currentBP >= 3 ? 'desktop' : 'mobile';
    let channelKey = 'ros';

    const pt = pub.KV && pub.KV.pageType;
    if (Array.isArray(pt) && pt.indexOf('home') !== -1) {
      channelKey = 'home';
    }

    const deviceProfiles = ringierAdunitMap[deviceKey];
    if (!deviceProfiles) return null;
    return deviceProfiles[channelKey] || null;
  }

  function adUnitConvertRingier(type, pos) {
    const profile = getRingierProfile();
    if (!profile) return null;

    const entry = profile[type];
    if (!entry) return null;
    return typeof entry === 'function' ? entry(pos) : entry;
  }

  function ringierElement(el) {
    const type = el.dataset.slotType || getSlotType(el);
    if (!type) return;

    const pos = parseInt(el.dataset.pos, 10);
    if (!pos || isNaN(pos)) return;

    const id = el.id;
    if (!id) return;

    if (registered[id]) return;

    const slot = adUnitConvertRingier(type, pos);
    if (!slot) return;

    admTagMan.registerSlot({
      slot: slot,
      container: id,
      events: {
        adLoaded: (d) => {
          try {
            if (id === 'footersticky') {
              handleFooterStickyRendered(id);
            } else {
              adTxt(id);
            }
          } catch (e) {}
        },
        adEmpty: (d) => {
          if (id === 'oop') {
            adFooterAfterOOP();
          }
        },
        adError: (d) => {},
        adStatus: (d) => {}
      }
    });

    registered[id] = true;
  }

  pub.ringierElement = ringierElement;

  function ringierLoadOOP() {
    const oopEl = document.getElementById('oop');
    if (!oopEl || !pubDisplay(oopEl)) return;

    if (window.pub && typeof pub.isFooterStickyBlockedByContent === 'function' &&
        pub.isFooterStickyBlockedByContent()) {
      return;
    }

    ringierElement(oopEl);
    if (window.admTagMan && admTagMan.loadSlots) {
      admTagMan.loadSlots();
    }
  }

  function ringierIO() {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (!entry.isIntersecting) return;

          const el = entry.target;
          observer.unobserve(el);

          if (!pubDisplay(el)) {
            return;
          }

          ringierElement(el);
          if (window.admTagMan && admTagMan.loadSlots) {
            admTagMan.loadSlots();
          }
        });
      },
      {
        root: null,
        rootMargin: `0px 0px ${pub.fetchDistance}px 0px`,
        threshold: 0
      }
    );

    const ad = document.getElementsByClassName('ad');
    for (let i = 0; i < ad.length; i++) {
      const el = ad[i];
      const type = getSlotType(el);
      if (!type) continue;
      if (!pubDisplay(el)) continue;
      observer.observe(el);
    }
  }

  function ylSlot(slotObj, slotId) {
    if (!slotObj || slotObj.__ylAttached || !window.yieldlove_cmd) return;

    try {
      const path = slotObj.getAdUnitPath && slotObj.getAdUnitPath();
      if (slotId === 'oop' || (typeof path === 'string' && /\/oop$/.test(path))) {
        return;
      }
    } catch (e) {}

    slotObj.__ylAttached = true;

    (function (so, sid) {
      window.yieldlove_cmd.push(function () {
        try {
          if (so.YLtimeout) clearTimeout(so.YLtimeout);
        } catch (e) {}

        if (so.__requested) return;
        if (so.setTargeting) {
          so.setTargeting('tl', 'yl');
        }
        so.__requested = true;

        try {
          const path = so.getAdUnitPath && so.getAdUnitPath();
          if (path && window.YLHH && YLHH.bidder && YLHH.bidder.cloneUnit) {
            YLHH.bidder.cloneUnit(path, sid, { startAuction: true });
          }
        } catch (e) {}
      });
    })(slotObj, slotId);
  }

  pub.requestGalleryAd = function () {
    setTimeout(function () {
      const candidates = document.querySelectorAll('.ad.horz[data-slot-name="gallery"]');
      if (!candidates.length) return;

      let el = null;
      for (const c of candidates) {
        if (pubDisplay(c)) {
          el = c;
          break;
        }
      }
      if (!el) el = candidates[0];

      let type = el.dataset.slotType || getSlotType(el) || 'horz';

      if (!el.dataset.pos || isNaN(parseInt(el.dataset.pos, 10))) {
        pub.slotPos[type] = (pub.slotPos[type] || 0) + 1;
        el.dataset.pos = String(pub.slotPos[type]);
      }
      if (!el.id) {
        el.id = type + el.dataset.pos;
      }
      el.dataset.slotType = type;

      if (isRingierMode()) {
        try {
          ringierElement(el);
          if (window.admTagMan && admTagMan.loadSlots) {
            admTagMan.loadSlots();
          }
        } catch (e) {}
      } else {
        if (!window.googletag || !googletag.cmd) {
          return;
        }

        const slotId = el.id;

        googletag.cmd.push(function () {
          const slotObj = defineSlot(el, type, slotId);
          if (!slotObj) return;

          try {
            if (slotObj.setTargeting) {
              slotObj.setTargeting('pos', ['gallery']);
            }
          } catch (e) {}

          ylSlot(slotObj, slotId);
          googletag.display(slotId);
        });
      }
    }, 0);
  };

  function checkGallery() {
    const triggers = document.querySelectorAll('[x-on\\:click*="imageGalleryOpen"]');
    if (!triggers.length) return;

    triggers.forEach((btn) => {
      if (btn.dataset.galleryClickAttached === '1') return;
      btn.dataset.galleryClickAttached = '1';

      btn.addEventListener('click', function () {
        if (window.pub && typeof pub.requestGalleryAd === 'function') {
          pub.requestGalleryAd();
        }
      });
    });
  }

  function cmpConsentGroup() {
    try {
      if (typeof window.OnetrustActiveGroups === 'string') {
        return window.OnetrustActiveGroups.split(',');
      }
      if (typeof window.OptanonActiveGroups === 'string') {
        return window.OptanonActiveGroups.split(',');
      }
      if (window.OneTrust && typeof OneTrust.GetActiveGroupIds === 'function') {
        var ids = OneTrust.GetActiveGroupIds();
        if (Array.isArray(ids)) return ids;
        if (typeof ids === 'string') return ids.split(',');
      }
    } catch (e) {}
    return null;
  }

  function cmpConsented() {
    const required = pub.consent || [];
    if (!required.length) return true;
    const active = cmpConsentGroup();
    if (!active) return false;
    return required.every((id) => active.indexOf(id) !== -1);
  }

  function cmpClosed() {
    try {
      if (window.OneTrust && typeof OneTrust.IsAlertBoxClosed === 'function') {
        return OneTrust.IsAlertBoxClosed();
      }
    } catch (e) {}
    return null;
  }

  function cmpGate(callback) {
    let done = false;
    const start = Date.now();
    const maxWait = 10000;

    function buildConsentState(source) {
      const active = cmpConsentGroup() || [];
      const full = cmpConsented();

      let mode = 'la';

      if (full) {
        mode = 'pa';
      } else if (active.indexOf('C0004') !== -1) {
        mode = 'npa';
      } else {
        mode = 'la';
      }

      return { mode, fullAds: full, activeGroups: active, source };
    }

    function finish(state) {
      if (done) return;
      done = true;
      callback(state);
    }

    function attachInitialOnConsentChanged() {
      try {
        if (window.OneTrust && typeof OneTrust.OnConsentChanged === 'function') {
          OneTrust.OnConsentChanged(function () {
            if (done) return;
            const state = buildConsentState('OnConsentChanged-initial');
            finish(state);
          });
          return;
        }
      } catch (e) {}

      if (Date.now() - start > maxWait) {
        const state = buildConsentState('fallback-no-OnConsentChanged');
        finish(state);
      } else {
        setTimeout(attachInitialOnConsentChanged, 200);
      }
    }

    function checkInitialState() {
      if (done) return;

      const closed = cmpClosed();

      if (closed === true) {
        const state = buildConsentState('initial-closed');
        finish(state);
        return;
      }

      if (closed === false) {
        attachInitialOnConsentChanged();
        return;
      }

      if (Date.now() - start > maxWait) {
        const state = buildConsentState('timeout-no-OneTrust');
        finish(state);
        return;
      }
      setTimeout(checkInitialState, 200);
    }
    checkInitialState();
  }

  let cmpConsentTimer = null;

  function cmpConsentReload() {
    try {
      if (!window.OneTrust || typeof OneTrust.OnConsentChanged !== 'function') {
        return;
      }

      let baseline = (cmpConsentGroup() || []).slice().sort().join(',');

      OneTrust.OnConsentChanged(function () {
        try {
          if (typeof OneTrust.IsAlertBoxClosed === 'function' &&
            !OneTrust.IsAlertBoxClosed()) {
            return;
          }
        } catch (e) {}

        const current = (cmpConsentGroup() || []).slice().sort().join(',');

        if (current === baseline) {
          return;
        }

        baseline = current;

        if (cmpConsentTimer) {
          clearTimeout(cmpConsentTimer);
        }

        cmpConsentTimer = setTimeout(function () {
          try {
            window.location.reload();
          } catch (e) {
            window.location.href = window.location.href;
          }
        }, 800);
      });
    } catch (e) {}
  }

  function initRingier() {
    (function (r, i, a, d, s) {
      r.admTagMan = r.admTagMan || {};
      r.admTagMan.q = r.admTagMan.q || [];
      r.admTagMan.cq = r.admTagMan.cq || [];
      const e = r.document.createElement('script');
      e.src =
        'https://cdn.ringier-advertising.ch/' +
        (s || 'prod') +
        '/tagmanager/' +
        i.toLowerCase() +
        '_' +
        a.toLowerCase() +
        '/' +
        d +
        '/atm.js';
      r.document.head.appendChild(e);
    })(window, 'abola.pt', 'de', 'latest');

    pubIds();

    window.admTagMan = window.admTagMan || {};
    window.admTagMan.q = window.admTagMan.q || [];

    admTagMan.q.push(function () {
      const sharedKVs = buildSharedKVs();
      sharedKVs.tl = 'ringier';
      //sharedKVs.admforce = 'qa';
      let channel = 'ROS';

      if (Array.isArray(pub.KV.pageType) && pub.KV.pageType.indexOf('home') !== -1) {
        channel = 'home';
      }

      admTagMan.init({
        platform: pub.currentBP >= 3 ? 'Desktop' : 'MobileWeb',
        channel: channel,
        targeting: sharedKVs
      });
      ringierIO();

      setTimeout(() => {
        if (!pub.footerstickyFallbackDone) {
          adFooterAfterOOP();
        }
      }, 2000);
    });
  }

  function initYL(consentState) {
    window.yieldlove_prevent_autostart = true;
    window.yieldlove_cmd = window.yieldlove_cmd || [];
    pubIds();

    window.googletag = window.googletag || { cmd: [] };

    if (!document.getElementById('yl-tag')) {
      const s = document.createElement('script');
      s.id = 'yl-tag';
      s.async = true;
      s.src = 'https://cdn-a.yieldlove.com/v2/yieldlove.js?abola.pt';
      document.head.appendChild(s);
    }

    googletag.cmd.push(function () {
      pub.ads = googletag.pubads();
      pub.adsReady = true;

      if (consentState && (consentState.mode === 'npa' || consentState.mode === 'la')) {
        pub.ads.setPrivacySettings({ nonPersonalizedAds: true });
      }

      cmpReqTargeting(consentState);
      pub.ads.disableInitialLoad();

      if (typeof pub.ads.addEventListener === 'function') {
        pub.ads.addEventListener('slotRenderEnded', function (event) {
          try {
            if (!event || !event.slot || typeof event.slot.getSlotElementId !== 'function') {
              return;
            }

            const slotElementId = event.slot.getSlotElementId();

            if (slotElementId === 'oop') {
              if (event.isEmpty) {
                adFooterAfterOOP();
              }
              return;
            }

            if (slotElementId === 'footersticky') {
              if (event.isEmpty) {
                return;
              }

              const wl = pub.footerstickyWL;
              const isWLGhost =
                wl &&
                event.campaignId &&
                wl[event.campaignId] &&
                event.size &&
                event.size[0] === 1 &&
                event.size[1] === 1;

              if (isWLGhost) {
                const container = document.getElementById('footersticky-container');
                if (container) container.classList.remove('footerstickyFX');
                const closeBtn = document.getElementById('footersticky-close');
                if (closeBtn) closeBtn.style.display = 'none';
                return;
              }

              handleFooterStickyRendered(slotElementId);
              return;
            }

            if (!event.isEmpty) {
              adTxt(slotElementId);
            }
          } catch (e) {}
        });
      }

      adKVtargeting();

      googletag.enableServices();
      pub.servicesEnabled = true;

      try {
        const oopEl = document.getElementById('oop');
        if (oopEl && pubDisplay(oopEl) && googletag.defineOutOfPageSlot) {
          if (window.pub && typeof pub.isFooterStickyBlockedByContent === 'function' &&
              pub.isFooterStickyBlockedByContent()) {
          } else if (!pub.oopSlot) {
            const slotId = oopEl.id;
            const oopSlot = googletag.defineOutOfPageSlot('/417417404/oop', slotId);
            if (oopSlot) {
              oopSlot.addService(pub.ads);

              try {
                if (oopSlot.setTargeting) {
                  oopSlot.setTargeting('tl', 'gpt');
                }
              } catch (e) {}

              pub.oopSlot = oopSlot;
              googletag.display(slotId);
            }
          }
        }
      } catch (e) {}

      pub.adLoader = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (!entry.isIntersecting) return;

            const el = entry.target;
            pub.adLoader.unobserve(el);

            if (!pubDisplay(el)) {
              return;
            }

            const type = el.dataset.slotType || getSlotType(el);
            const slotId = el.id;
            const slotObj = defineSlot(el, type, slotId);
            if (!slotObj) return;

            ylSlot(slotObj, slotId);
            googletag.display(slotId);
          });
        },
        {
          root: null,
          rootMargin: `0px 0px ${pub.fetchDistance}px 0px`,
          threshold: 0
        }
      );

      const ad = document.getElementsByClassName('ad');
      for (let i = 0; i < ad.length; i++) {
        const el = ad[i];
        const type = getSlotType(el);
        if (!type) continue;
        pub.adLoader.observe(el);
      }
    });
  }

  checkGallery();

  cmpGate(function (consentState) {
    pub.consentState = consentState;

    if (isRingierMode()) {
      initRingier();
    } else {
      initYL(consentState);
    }

    cmpConsentReload();
  });
});
</script> 



ate 2024
groupm 


essence mediacom
mindshare 
wavemaker




dsp 

